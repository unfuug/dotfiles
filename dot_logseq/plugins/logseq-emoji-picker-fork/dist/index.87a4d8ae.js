var e,t,i,o,r,s,n,a,c,l,h,u,d,p,m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},g={},f={},y=m.parcelRequire8b64;null==y&&((y=function(e){if(e in g)return g[e].exports;if(e in f){var t=f[e];delete f[e];var i={id:e,exports:{}};return g[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){f[e]=t},m.parcelRequire8b64=y),y.register("cVm5l",function(e,t){self,e.exports=(()=>{var i={227:(e,t,i)=>{let o;var r=i(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;t.splice(1,0,i,"color: inherit");let o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(o++,"%c"===e&&(r=o))}),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(o=!1,()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(447)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,i)=>{e.exports=function(e){function t(e){let i,r=null;function s(...e){if(!s.enabled)return;let o=Number(new Date),r=o-(i||o);s.diff=r,s.prev=i,s.curr=o,i=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(i,o)=>{if("%%"===i)return"%";n++;let r=t.formatters[o];if("function"==typeof r){let t=e[n];i=r.call(s,t),e.splice(n,1),n--}return i}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=o,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?t.enabled(e):r,set:e=>{r=e}}),"function"==typeof t.init&&t.init(s),s}function o(e,i){let o=t(this.namespace+(void 0===i?":":i)+e);return o.log=this.log,o}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.names=[],t.skips=[];let o=("string"==typeof e?e:"").split(/[\s,]+/),r=o.length;for(i=0;i<r;i++)o[i]&&("-"===(e=o[i].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let i,o;if("*"===e[e.length-1])return!0;for(i=0,o=t.skips.length;i<o;i++)if(t.skips[i].test(e))return!1;for(i=0,o=t.names.length;i<o;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(i=>{t[i]=e[i]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t)|0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,i=Object.isFrozen,o=Object.getPrototypeOf,r=Object.getOwnPropertyDescriptor,s=Object.freeze,n=Object.seal,a=Object.create,c="undefined"!=typeof Reflect&&Reflect,l=c.apply,h=c.construct;l||(l=function(e,t,i){return e.apply(t,i)}),s||(s=function(e){return e}),n||(n=function(e){return e}),h||(h=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))))});var u,d=C(Array.prototype.forEach),p=C(Array.prototype.pop),m=C(Array.prototype.push),g=C(String.prototype.toLowerCase),f=C(String.prototype.match),y=C(String.prototype.replace),v=C(String.prototype.indexOf),w=C(String.prototype.trim),b=C(RegExp.prototype.test),_=(u=TypeError,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return h(u,t)});function C(e){return function(t){for(var i=arguments.length,o=Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return l(e,t,o)}}function x(e,o){t&&t(e,null);for(var r=o.length;r--;){var s=o[r];if("string"==typeof s){var n=g(s);n!==s&&(i(o)||(o[r]=n),s=n)}e[s]=!0}return e}function j(t){var i=a(null),o=void 0;for(o in t)l(e,t,[o])&&(i[o]=t[o]);return i}function k(e,t){for(;null!==e;){var i=r(e,t);if(i){if(i.get)return C(i.get);if("function"==typeof i.value)return C(i.value)}e=o(e)}return function(e){return console.warn("fallback value for",e),null}}var E=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=s(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),T=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=s(["#text"]),O=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),z=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),I=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),R=n(/\{\{[\s\S]*|[\s\S]*\}\}/gm),$=n(/<%[\s\S]*|[\s\S]*%>/gm),D=n(/^data-[\-\w.\u00B7-\uFFFF]/),N=n(/^aria-[\-\w]+$/),B=n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=n(/^(?:\w+script|data):/i),U=n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function q(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var W=function(e,t){if("object"!==(void 0===e?"undefined":V(e))||"function"!=typeof e.createPolicy)return null;var i=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(i=t.currentScript.getAttribute(o));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,i=function(t){return e(t)};if(i.version="2.3.1",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var o=t.document,r=t.document,n=t.DocumentFragment,a=t.HTMLTemplateElement,c=t.Node,l=t.Element,h=t.NodeFilter,u=t.NamedNodeMap,C=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,K=t.Text,G=t.Comment,J=t.DOMParser,Z=t.trustedTypes,Y=l.prototype,X=k(Y,"cloneNode"),Q=k(Y,"nextSibling"),ee=k(Y,"childNodes"),et=k(Y,"parentNode");if("function"==typeof a){var ei=r.createElement("template");ei.content&&ei.content.ownerDocument&&(r=ei.content.ownerDocument)}var eo=W(Z,o),er=eo&&eF?eo.createHTML(""):"",es=r,en=es.implementation,ea=es.createNodeIterator,ec=es.createDocumentFragment,el=es.getElementsByTagName,eh=o.importNode,eu={};try{eu=j(r).documentMode?r.documentMode:{}}catch(e){}var ed={};i.isSupported="function"==typeof et&&en&&void 0!==en.createHTMLDocument&&9!==eu;var ep=B,em=null,eg=x({},[].concat(q(E),q(S),q(L),q(F),q(P))),ef=null,ey=x({},[].concat(q(O),q(z),q(I),q(M))),ev=null,ew=null,eb=!0,e_=!0,eC=!1,ex=!1,ej=!1,ek=!1,eE=!1,eS=!1,eL=!1,eA=!0,eF=!1,eT=!0,eP=!0,eO=!1,ez={},eI=null,eM=x({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),eR=null,e$=x({},["audio","video","img","source","image","track"]),eD=null,eN=x({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eB="http://www.w3.org/1998/Math/MathML",eH="http://www.w3.org/2000/svg",eU="http://www.w3.org/1999/xhtml",eV=eU,eq=!1,eW=null,eK=r.createElement("form"),eG=function(e){eW&&eW===e||(e&&"object"===(void 0===e?"undefined":V(e))||(e={}),em="ALLOWED_TAGS"in(e=j(e))?x({},e.ALLOWED_TAGS):eg,ef="ALLOWED_ATTR"in e?x({},e.ALLOWED_ATTR):ey,eD="ADD_URI_SAFE_ATTR"in e?x(j(eN),e.ADD_URI_SAFE_ATTR):eN,eR="ADD_DATA_URI_TAGS"in e?x(j(e$),e.ADD_DATA_URI_TAGS):e$,eI="FORBID_CONTENTS"in e?x({},e.FORBID_CONTENTS):eM,ev="FORBID_TAGS"in e?x({},e.FORBID_TAGS):{},ew="FORBID_ATTR"in e?x({},e.FORBID_ATTR):{},ez="USE_PROFILES"in e&&e.USE_PROFILES,eb=!1!==e.ALLOW_ARIA_ATTR,e_=!1!==e.ALLOW_DATA_ATTR,eC=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ex=e.SAFE_FOR_TEMPLATES||!1,ej=e.WHOLE_DOCUMENT||!1,eS=e.RETURN_DOM||!1,eL=e.RETURN_DOM_FRAGMENT||!1,eA=!1!==e.RETURN_DOM_IMPORT,eF=e.RETURN_TRUSTED_TYPE||!1,eE=e.FORCE_BODY||!1,eT=!1!==e.SANITIZE_DOM,eP=!1!==e.KEEP_CONTENT,eO=e.IN_PLACE||!1,ep=e.ALLOWED_URI_REGEXP||ep,eV=e.NAMESPACE||eU,ex&&(e_=!1),eL&&(eS=!0),ez&&(em=x({},[].concat(q(P))),ef=[],!0===ez.html&&(x(em,E),x(ef,O)),!0===ez.svg&&(x(em,S),x(ef,z),x(ef,M)),!0===ez.svgFilters&&(x(em,L),x(ef,z),x(ef,M)),!0===ez.mathMl&&(x(em,F),x(ef,I),x(ef,M))),e.ADD_TAGS&&(em===eg&&(em=j(em)),x(em,e.ADD_TAGS)),e.ADD_ATTR&&(ef===ey&&(ef=j(ef)),x(ef,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&x(eD,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(eI===eM&&(eI=j(eI)),x(eI,e.FORBID_CONTENTS)),eP&&(em["#text"]=!0),ej&&x(em,["html","head","body"]),em.table&&(x(em,["tbody"]),delete ev.tbody),s&&s(e),eW=e)},eJ=x({},["mi","mo","mn","ms","mtext"]),eZ=x({},["foreignobject","desc","title","annotation-xml"]),eY=x({},S);x(eY,L),x(eY,A);var eX=x({},F);x(eX,T);var eQ=function(e){var t=et(e);t&&t.tagName||(t={namespaceURI:eU,tagName:"template"});var i=g(e.tagName),o=g(t.tagName);if(e.namespaceURI===eH)return t.namespaceURI===eU?"svg"===i:t.namespaceURI===eB?"svg"===i&&("annotation-xml"===o||eJ[o]):!!eY[i];if(e.namespaceURI===eB)return t.namespaceURI===eU?"math"===i:t.namespaceURI===eH?"math"===i&&eZ[o]:!!eX[i];if(e.namespaceURI===eU){if(t.namespaceURI===eH&&!eZ[o]||t.namespaceURI===eB&&!eJ[o])return!1;var r=x({},["title","style","font","a","script"]);return!eX[i]&&(r[i]||!eY[i])}return!1},e1=function(e){m(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=er}catch(t){e.remove()}}},e0=function(e,t){try{m(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ef[e]){if(eS||eL)try{e1(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}},e2=function(e){var t=void 0,i=void 0;if(eE)e="<remove></remove>"+e;else{var o=f(e,/^[\r\n\t ]+/);i=o&&o[0]}var s=eo?eo.createHTML(e):e;if(eV===eU)try{t=(new J).parseFromString(s,"text/html")}catch(e){}if(!t||!t.documentElement){t=en.createDocument(eV,"template",null);try{t.documentElement.innerHTML=eq?"":s}catch(e){}}var n=t.body||t.documentElement;return e&&i&&n.insertBefore(r.createTextNode(i),n.childNodes[0]||null),eV===eU?el.call(t,ej?"html":"body")[0]:ej?t.documentElement:n},e3=function(e){return ea.call(e.ownerDocument||e,e,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},e5=function(e){return"object"===(void 0===c?"undefined":V(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":V(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},e4=function(e,t,o){ed[e]&&d(ed[e],function(e){e.call(i,t,o,eW)})},e6=function(e){var t=void 0;if(e4("beforeSanitizeElements",e,null),!(e instanceof K||e instanceof G||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof C&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)||f(e.nodeName,/[\u0080-\uFFFF]/))return e1(e),!0;var o=g(e.nodeName);if(e4("uponSanitizeElement",e,{tagName:o,allowedTags:em}),!e5(e.firstElementChild)&&(!e5(e.content)||!e5(e.content.firstElementChild))&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent)||"select"===o&&b(/<template/i,e.innerHTML))return e1(e),!0;if(!em[o]||ev[o]){if(eP&&!eI[o]){var r=et(e)||e.parentNode,s=ee(e)||e.childNodes;if(s&&r)for(var n=s.length-1;n>=0;--n)r.insertBefore(X(s[n],!0),Q(e))}return e1(e),!0}return e instanceof l&&!eQ(e)?(e1(e),!0):("noscript"===o||"noembed"===o)&&b(/<\/no(script|embed)/i,e.innerHTML)?(e1(e),!0):(ex&&3===e.nodeType&&(t=y(t=e.textContent,R," "),t=y(t,$," "),e.textContent!==t&&(m(i.removed,{element:e.cloneNode()}),e.textContent=t)),e4("afterSanitizeElements",e,null),!1)},e9=function(e,t,i){if(eT&&("id"===t||"name"===t)&&(i in r||i in eK))return!1;if(e_&&!ew[t]&&b(D,t));else if(eb&&b(N,t));else{if(!ef[t]||ew[t])return!1;if(eD[t]);else if(b(ep,y(i,U,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(i,"data:")||!eR[e]){if(eC&&!b(H,y(i,U,"")));else if(i)return!1}}return!0},e8=function(e){var t=void 0,o=void 0,r=void 0,s=void 0;e4("beforeSanitizeAttributes",e,null);var n=e.attributes;if(n){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ef};for(s=n.length;s--;){var c=t=n[s],l=c.name,h=c.namespaceURI;if(o=w(t.value),r=g(l),a.attrName=r,a.attrValue=o,a.keepAttr=!0,a.forceKeepAttr=void 0,e4("uponSanitizeAttribute",e,a),o=a.attrValue,!a.forceKeepAttr&&(e0(l,e),a.keepAttr)){if(b(/\/>/i,o))e0(l,e);else if(ex&&(o=y(o,R," "),o=y(o,$," ")),e9(e.nodeName.toLowerCase(),r,o))try{h?e.setAttributeNS(h,l,o):e.setAttribute(l,o),p(i.removed)}catch(e){}}}e4("afterSanitizeAttributes",e,null)}},e7=function e(t){var i=void 0,o=e3(t);for(e4("beforeSanitizeShadowDOM",t,null);i=o.nextNode();)e4("uponSanitizeShadowNode",i,null),e6(i)||(i.content instanceof n&&e(i.content),e8(i));e4("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e,r){var s=void 0,a=void 0,l=void 0,h=void 0,u=void 0;if((eq=!e)&&(e="<!-->"),"string"!=typeof e&&!e5(e)){if("function"!=typeof e.toString)throw _("toString is not a function");if("string"!=typeof(e=e.toString()))throw _("dirty is not a string, aborting")}if(!i.isSupported){if("object"===V(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(e5(e))return t.toStaticHTML(e.outerHTML)}return e}if(ek||eG(r),i.removed=[],"string"==typeof e&&(eO=!1),eO);else if(e instanceof c)1===(a=(s=e2("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?s=a:s.appendChild(a);else{if(!eS&&!ex&&!ej&&-1===e.indexOf("<"))return eo&&eF?eo.createHTML(e):e;if(!(s=e2(e)))return eS?null:er}s&&eE&&e1(s.firstChild);for(var d=e3(eO?e:s);l=d.nextNode();)3===l.nodeType&&l===h||e6(l)||(l.content instanceof n&&e7(l.content),e8(l),h=l);if(h=null,eO)return e;if(eS){if(eL)for(u=ec.call(s.ownerDocument);s.firstChild;)u.appendChild(s.firstChild);else u=s;return eA&&(u=eh.call(o,u,!0)),u}var p=ej?s.outerHTML:s.innerHTML;return ex&&(p=y(p,R," "),p=y(p,$," ")),eo&&eF?eo.createHTML(p):p},i.setConfig=function(e){eG(e),ek=!0},i.clearConfig=function(){eW=null,ek=!1},i.isValidAttribute=function(e,t,i){return eW||eG({}),e9(g(e),g(t),i)},i.addHook=function(e,t){"function"==typeof t&&(ed[e]=ed[e]||[],m(ed[e],t))},i.removeHook=function(e){ed[e]&&p(ed[e])},i.removeHooks=function(e){ed[e]&&(ed[e]=[])},i.removeAllHooks=function(){ed={}},i}()}()},729:e=>{var t=Object.prototype.hasOwnProperty,i="~";function o(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,o,s,n){if("function"!=typeof o)throw TypeError("The listener must be a function");var a=new r(o,s||e,n),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function n(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(i?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=i?i+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,s=o.length,n=Array(s);r<s;r++)n[r]=o[r].fn;return n},a.prototype.listenerCount=function(e){var t=i?i+e:e,o=this._events[t];return o?o.fn?1:o.length:0},a.prototype.emit=function(e,t,o,r,s,n){var a=i?i+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,o),!0;case 4:return h.fn.call(h.context,t,o,r),!0;case 5:return h.fn.call(h.context,t,o,r,s),!0;case 6:return h.fn.call(h.context,t,o,r,s,n),!0}for(l=1,c=Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var d,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,o);break;case 4:h[l].fn.call(h[l].context,t,o,r);break;default:if(!c)for(d=1,c=Array(u-1);d<u;d++)c[d-1]=arguments[d];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,o,r){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return n(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||r&&!a.once||o&&a.context!==o||n(this,s);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||r&&!a[c].once||o&&a[c].context!==o)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:n(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&n(this,t)):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},824:e=>{function t(e,t,i,o){return Math.round(e/i)+" "+o+(t>=1.5*i?"s":"")}e.exports=function(e,i){i=i||{};var o,r,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===s&&isFinite(e))return i.long?(r=Math.abs(e))>=864e5?t(e,r,864e5,"day"):r>=36e5?t(e,r,36e5,"hour"):r>=6e4?t(e,r,6e4,"minute"):r>=1e3?t(e,r,1e3,"second"):e+" ms":(o=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":o>=36e5?Math.round(e/36e5)+"h":o>=6e4?Math.round(e/6e4)+"m":o>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,i)=>{var o=i(155),r="win32"===o.platform,s=i(539);function n(e,t){for(var i=[],o=0;o<e.length;o++){var r=e[o];r&&"."!==r&&(".."===r?i.length&&".."!==i[i.length-1]?i.pop():t&&i.push(".."):i.push(r))}return i}function a(e){for(var t=e.length-1,i=0;i<=t&&!e[i];i++);for(var o=t;o>=0&&!e[o];o--);return 0===i&&o===t?e:i>o?[]:e.slice(i,o+1)}var c=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,l=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,h={};function u(e){var t=c.exec(e),i=(t[1]||"")+(t[2]||""),o=t[3]||"",r=l.exec(o);return[i,r[1],r[2],r[3]]}function d(e){var t=c.exec(e),i=t[1]||"",o=!!i&&":"!==i[1];return{device:i,isUnc:o,isAbsolute:o||!!t[2],tail:t[3]}}function p(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}h.resolve=function(){for(var e,t="",i="",r=!1,a=arguments.length-1;a>=-1;a--){if(a>=0?e=arguments[a]:t?(e=o.env["="+t])&&e.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(e=t+"\\"):e=o.cwd(),!s.isString(e))throw TypeError("Arguments to path.resolve must be strings");if(e){var c=d(e),l=c.device,h=c.isUnc,u=c.isAbsolute,m=c.tail;if((!l||!t||l.toLowerCase()===t.toLowerCase())&&(t||(t=l),r||(i=m+"\\"+i,r=u),t&&r))break}}return h&&(t=p(t)),t+(r?"\\":"")+(i=n(i.split(/[\\\/]+/),!r).join("\\"))||"."},h.normalize=function(e){var t=d(e),i=t.device,o=t.isUnc,r=t.isAbsolute,s=t.tail,a=/[\\\/]$/.test(s);return(s=n(s.split(/[\\\/]+/),!r).join("\\"))||r||(s="."),s&&a&&(s+="\\"),o&&(i=p(i)),i+(r?"\\":"")+s},h.isAbsolute=function(e){return d(e).isAbsolute},h.join=function(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(!s.isString(i))throw TypeError("Arguments to path.join must be strings");i&&e.push(i)}var o=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(o=o.replace(/^[\\\/]{2,}/,"\\")),h.normalize(o)},h.relative=function(e,t){e=h.resolve(e),t=h.resolve(t);for(var i=e.toLowerCase(),o=t.toLowerCase(),r=a(t.split("\\")),s=a(i.split("\\")),n=a(o.split("\\")),c=Math.min(s.length,n.length),l=c,u=0;u<c;u++)if(s[u]!==n[u]){l=u;break}if(0==l)return t;var d=[];for(u=l;u<s.length;u++)d.push("..");return(d=d.concat(r.slice(l))).join("\\")},h._makeLong=function(e){if(!s.isString(e))return e;if(!e)return"";var t=h.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},h.dirname=function(e){var t=u(e),i=t[0],o=t[1];return i||o?(o&&(o=o.substr(0,o.length-1)),i+o):"."},h.basename=function(e,t){var i=u(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},h.extname=function(e){return u(e)[3]},h.format=function(e){if(!s.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!s.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var i=e.dir,o=e.base||"";return i?i[i.length-1]===h.sep?i+o:i+h.sep+o:o},h.parse=function(e){if(!s.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=u(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},h.sep="\\",h.delimiter=";";var m=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function f(e){return m.exec(e).slice(1)}g.resolve=function(){for(var e="",t=!1,i=arguments.length-1;i>=-1&&!t;i--){var r=i>=0?arguments[i]:o.cwd();if(!s.isString(r))throw TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r[0])}return(t?"/":"")+(e=n(e.split("/"),!t).join("/"))||"."},g.normalize=function(e){var t=g.isAbsolute(e),i=e&&"/"===e[e.length-1];return(e=n(e.split("/"),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},g.isAbsolute=function(e){return"/"===e.charAt(0)},g.join=function(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];if(!s.isString(i))throw TypeError("Arguments to path.join must be strings");i&&(e+=e?"/"+i:i)}return g.normalize(e)},g.relative=function(e,t){e=g.resolve(e).substr(1),t=g.resolve(t).substr(1);for(var i=a(e.split("/")),o=a(t.split("/")),r=Math.min(i.length,o.length),s=r,n=0;n<r;n++)if(i[n]!==o[n]){s=n;break}var c=[];for(n=s;n<i.length;n++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},g._makeLong=function(e){return e},g.dirname=function(e){var t=f(e),i=t[0],o=t[1];return i||o?(o&&(o=o.substr(0,o.length-1)),i+o):"."},g.basename=function(e,t){var i=f(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},g.extname=function(e){return f(e)[3]},g.format=function(e){if(!s.isObject(e))throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!s.isString(t))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+g.sep:"")+(e.base||"")},g.parse=function(e){if(!s.isString(e))throw TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=f(e);if(!t||4!==t.length)throw TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},g.sep="/",g.delimiter=":",e.exports=r?h:g,e.exports.posix=g,e.exports.win32=h},155:e=>{var t,i,o=e.exports={};function r(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function n(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var a,c=[],l=!1,h=-1;function u(){l&&a&&(l=!1,a.length?c=a.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=n(u);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new p(e,t)),1!==c.length||l||n(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,i)=>{var o=i(155),r=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(a(arguments[i]));return t.join(" ")}i=1;for(var o=arguments,s=o.length,n=String(e).replace(r,function(e){if("%%"===e)return"%";if(i>=s)return e;switch(e){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch(e){return"[Circular]"}default:return e}}),c=o[i];i<s;c=o[++i])g(c)||!b(c)?n+=" "+c:n+=" "+a(c);return n},t.deprecate=function(e,r){if(v(i.g.process))return function(){return t.deprecate(e,r).apply(this,arguments)};if(!0===o.noDeprecation)return e;var s=!1;return function(){if(!s){if(o.throwDeprecation)throw Error(r);o.traceDeprecation?console.trace(r):console.error(r),s=!0}return e.apply(this,arguments)}};var s,n={};function a(e,i){var o={seen:[],stylize:l};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),m(i)?o.showHidden=i:i&&t._extend(o,i),v(o.showHidden)&&(o.showHidden=!1),v(o.depth)&&(o.depth=2),v(o.colors)&&(o.colors=!1),v(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=c),h(o,e,o.depth)}function c(e,t){var i=a.styles[t];return i?"\x1b["+a.colors[i][0]+"m"+e+"\x1b["+a.colors[i][1]+"m":e}function l(e,t){return e}function h(e,i,o){if(e.customInspect&&i&&x(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r,s,n=i.inspect(o,e);return y(n)||(n=h(e,n,o)),n}var a=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return f(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,i);if(a)return a;var c=Object.keys(i),l=(j={},c.forEach(function(e,t){j[e]=!0}),j);if(e.showHidden&&(c=Object.getOwnPropertyNames(i)),C(i)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return u(i);if(0===c.length){if(x(i)){var b=i.name?": "+i.name:"";return e.stylize("[Function"+b+"]","special")}if(w(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(_(i))return e.stylize(Date.prototype.toString.call(i),"date");if(C(i))return u(i)}var j,k,E="",L=!1,A=["{","}"];return p(i)&&(L=!0,A=["[","]"]),x(i)&&(E=" [Function"+(i.name?": "+i.name:"")+"]"),w(i)&&(E=" "+RegExp.prototype.toString.call(i)),_(i)&&(E=" "+Date.prototype.toUTCString.call(i)),C(i)&&(E=" "+u(i)),0!==c.length||L&&0!=i.length?o<0?w(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),k=L?function(e,t,i,o,r){for(var s=[],n=0,a=t.length;n<a;++n)S(t,String(n))?s.push(d(e,t,i,o,String(n),!0)):s.push("");return r.forEach(function(r){r.match(/^\d+$/)||s.push(d(e,t,i,o,r,!0))}),s}(e,i,o,l,c):c.map(function(t){return d(e,i,o,l,t,L)}),e.seen.pop(),r=E,s=A,k.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?s[0]+(""===r?"":r+"\n ")+" "+k.join(",\n  ")+" "+s[1]:s[0]+r+" "+k.join(", ")+" "+s[1]):A[0]+E+A[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,i,o,r,s){var n,a,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),S(o,r)||(n="["+r+"]"),a||(0>e.seen.indexOf(c.value)?(a=g(i)?h(e,c.value,null):h(e,c.value,i-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(n)){if(s&&r.match(/^\d+$/))return a;(n=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=e.stylize(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=e.stylize(n,"string"))}return n+": "+a}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function f(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function w(e){return b(e)&&"[object RegExp]"===j(e)}function b(e){return"object"==typeof e&&null!==e}function _(e){return b(e)&&"[object Date]"===j(e)}function C(e){return b(e)&&("[object Error]"===j(e)||e instanceof Error)}function x(e){return"function"==typeof e}function j(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(s)&&(s=o.env.NODE_DEBUG||""),!n[e=e.toUpperCase()]){if(RegExp("\\b"+e+"\\b","i").test(s)){var i=o.pid;n[e]=function(){var o=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,o)}}else n[e]=function(){}}return n[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=f,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=w,t.isObject=b,t.isDate=_,t.isError=C,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(384);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,i;console.log("%s - %s",(i=[k((e=new Date).getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":"),[e.getDate(),E[e.getMonth()],i].join(" ")),t.format.apply(t,arguments))},t.inherits=i(717),t._extend=function(e,t){if(!t||!b(t))return e;for(var i=Object.keys(t),o=i.length;o--;)e[i[o]]=t[i[o]];return e}}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return i[e].call(s.exports,s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{LSPluginUser:()=>tT,setupPluginUserInstance:()=>tP});var i=r(520);r(856);let o=function(e,t){return e===t||e!=e&&t!=t},n=function(e,t){for(var i=e.length;i--;)if(o(e[i][0],t))return i;return -1};var a=Array.prototype.splice;function c(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}c.prototype.clear=function(){this.__data__=[],this.size=0},c.prototype.delete=function(e){var t=this.__data__,i=n(t,e);return!(i<0||(i==t.length-1?t.pop():a.call(t,i,1),--this.size,0))},c.prototype.get=function(e){var t=this.__data__,i=n(t,e);return i<0?void 0:t[i][1]},c.prototype.has=function(e){return n(this.__data__,e)>-1},c.prototype.set=function(e,t){var i=this.__data__,o=n(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this};let l="object"==typeof m&&m&&m.Object===Object&&m;var h="object"==typeof self&&self&&self.Object===Object&&self;let u=l||h||Function("return this")(),d=u.Symbol;var p=Object.prototype,g=p.hasOwnProperty,f=p.toString,y=d?d.toStringTag:void 0,v=Object.prototype.toString,w=d?d.toStringTag:void 0;let b=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?function(e){var t=g.call(e,y),i=e[y];try{e[y]=void 0;var o=!0}catch(e){}var r=f.call(e);return o&&(t?e[y]=i:delete e[y]),r}(e):v.call(e)},_=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},C=function(e){if(!_(e))return!1;var t=b(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},x=u["__core-js_shared__"];var j,k=(j=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",E=Function.prototype.toString,S=/^\[object .+?Constructor\]$/,L=Object.prototype,A=Function.prototype.toString,F=L.hasOwnProperty,T=RegExp("^"+A.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let P=function(e,t){var i=null==e?void 0:e[t];return!(!_(i)||k&&k in i)&&(C(i)?T:S).test(function(e){if(null!=e){try{return E.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(i))?i:void 0},O=P(u,"Map"),z=P(Object,"create");var I=Object.prototype.hasOwnProperty,M=Object.prototype.hasOwnProperty;function R(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}R.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},R.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},R.prototype.get=function(e){var t=this.__data__;if(z){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return I.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:M.call(t,e)},R.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this};let $=function(e,t){var i,o=e.__data__;return("string"==(i=typeof t)||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?o["string"==typeof t?"string":"hash"]:o.map};function D(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function N(e){var t=this.__data__=new c(e);this.size=t.size}D.prototype.clear=function(){this.size=0,this.__data__={hash:new R,map:new(O||c),string:new R}},D.prototype.delete=function(e){var t=$(this,e).delete(e);return this.size-=t?1:0,t},D.prototype.get=function(e){return $(this,e).get(e)},D.prototype.has=function(e){return $(this,e).has(e)},D.prototype.set=function(e,t){var i=$(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this},N.prototype.clear=function(){this.__data__=new c,this.size=0},N.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},N.prototype.get=function(e){return this.__data__.get(e)},N.prototype.has=function(e){return this.__data__.has(e)},N.prototype.set=function(e,t){var i=this.__data__;if(i instanceof c){var o=i.__data__;if(!O||o.length<199)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new D(o)}return i.set(e,t),this.size=i.size,this};let B=function(){try{var e=P(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),H=function(e,t,i){"__proto__"==t&&B?B(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i},U=function(e,t,i){(void 0===i||o(e[t],i))&&(void 0!==i||t in e)||H(e,t,i)},V=function(e,t,i){for(var o=-1,r=Object(e),s=i(e),n=s.length;n--;){var a=s[++o];if(!1===t(r[a],a,r))break}return e};var q=t&&!t.nodeType&&t,W=q&&e&&!e.nodeType&&e,K=W&&W.exports===q?u.Buffer:void 0,G=K?K.allocUnsafe:void 0;let J=u.Uint8Array,Z=function(e,t){var i,o,r=t?(o=new(i=e.buffer).constructor(i.byteLength),new J(o).set(new J(i)),o):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Y=Object.create;let X=function(){function e(){}return function(t){if(!_(t))return{};if(Y)return Y(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),Q=(ee=Object.getPrototypeOf,et=Object,function(e){return ee(et(e))});var ee,et,ei=Object.prototype;let eo=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ei)},er=function(e){return null!=e&&"object"==typeof e},es=function(e){return er(e)&&"[object Arguments]"==b(e)};var en=Object.prototype,ea=en.hasOwnProperty,ec=en.propertyIsEnumerable;let el=es(function(){return arguments}())?es:function(e){return er(e)&&ea.call(e,"callee")&&!ec.call(e,"callee")},eh=Array.isArray,eu=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ed=function(e){return null!=e&&eu(e.length)&&!C(e)};var ep=t&&!t.nodeType&&t,em=ep&&e&&!e.nodeType&&e,eg=em&&em.exports===ep?u.Buffer:void 0;let ef=(eg?eg.isBuffer:void 0)||function(){return!1};var ey=Object.prototype,ev=Function.prototype.toString,ew=ey.hasOwnProperty,eb=ev.call(Object),e_={};e_["[object Float32Array]"]=e_["[object Float64Array]"]=e_["[object Int8Array]"]=e_["[object Int16Array]"]=e_["[object Int32Array]"]=e_["[object Uint8Array]"]=e_["[object Uint8ClampedArray]"]=e_["[object Uint16Array]"]=e_["[object Uint32Array]"]=!0,e_["[object Arguments]"]=e_["[object Array]"]=e_["[object ArrayBuffer]"]=e_["[object Boolean]"]=e_["[object DataView]"]=e_["[object Date]"]=e_["[object Error]"]=e_["[object Function]"]=e_["[object Map]"]=e_["[object Number]"]=e_["[object Object]"]=e_["[object RegExp]"]=e_["[object Set]"]=e_["[object String]"]=e_["[object WeakMap]"]=!1;var eC=t&&!t.nodeType&&t,ex=eC&&e&&!e.nodeType&&e,ej=ex&&ex.exports===eC&&l.process,ek=function(){try{return ex&&ex.require&&ex.require("util").types||ej&&ej.binding&&ej.binding("util")}catch(e){}}(),eE=ek&&ek.isTypedArray;let eS=eE?function(e){return eE(e)}:function(e){return er(e)&&eu(e.length)&&!!e_[b(e)]},eL=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var eA=Object.prototype.hasOwnProperty;let eF=function(e,t,i){var r=e[t];eA.call(e,t)&&o(r,i)&&(void 0!==i||t in e)||H(e,t,i)};var eT=/^(?:0|[1-9]\d*)$/;let eP=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&eT.test(e))&&e>-1&&e%1==0&&e<t};var eO=Object.prototype.hasOwnProperty;let ez=function(e,t){var i=eh(e),o=!i&&el(e),r=!i&&!o&&ef(e),s=!i&&!o&&!r&&eS(e),n=i||o||r||s,a=n?function(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}(e.length,String):[],c=a.length;for(var l in e)!t&&!eO.call(e,l)||n&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||eP(l,c))||a.push(l);return a};var eI=Object.prototype.hasOwnProperty;let eM=function(e){if(!_(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=eo(e),i=[];for(var o in e)("constructor"!=o||!t&&eI.call(e,o))&&i.push(o);return i},eR=function(e){return ed(e)?ez(e,!0):eM(e)},e$=function(e,t,i,o,r,s,n){var a=eL(e,i),c=eL(t,i),l=n.get(c);if(l)U(e,i,l);else{var h=s?s(a,c,i+"",e,t,n):void 0,u=void 0===h;if(u){var d=eh(c),p=!d&&ef(c),m=!d&&!p&&eS(c);h=c,d||p||m?eh(a)?h=a:er(a)&&ed(a)?h=function(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}(a):p?(u=!1,h=function(e,t){if(t)return e.slice();var i=e.length,o=G?G(i):new e.constructor(i);return e.copy(o),o}(c,!0)):m?(u=!1,h=Z(c,!0)):h=[]:function(e){if(!er(e)||"[object Object]"!=b(e))return!1;var t=Q(e);if(null===t)return!0;var i=ew.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&ev.call(i)==eb}(c)||el(c)?(h=a,el(a)?h=function(e,t,i,o){var r=!i;i||(i={});for(var s=-1,n=t.length;++s<n;){var a=t[s],c=o?o(i[a],e[a],a,i,e):void 0;void 0===c&&(c=e[a]),r?H(i,a,c):eF(i,a,c)}return i}(a,eR(a)):_(a)&&!C(a)||(h="function"!=typeof c.constructor||eo(c)?{}:X(Q(c)))):u=!1}u&&(n.set(c,h),r(h,c,o,s,n),n.delete(c)),U(e,i,h)}},eD=function e(t,i,o,r,s){t!==i&&V(i,function(n,a){if(s||(s=new N),_(n))e$(t,i,a,o,e,r,s);else{var c=r?r(eL(t,a),n,a+"",t,i,s):void 0;void 0===c&&(c=n),U(t,a,c)}},eR)},eN=function(e){return e},eB=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)};var eH=Math.max;let eU=B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:eN;var eV=Date.now;let eq=(eK=0,eG=0,function(){var e=eV(),t=16-(e-eG);if(eG=e,t>0){if(++eK>=800)return arguments[0]}else eK=0;return eU.apply(void 0,arguments)}),eW=(eX=function(e,t,i){eD(e,t,i)},eq((eZ=eJ=function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,n=r>2?t[2]:void 0;for(s=eX.length>3&&"function"==typeof s?(r--,s):void 0,n&&function(e,t,i){if(!_(i))return!1;var r=typeof t;return!!("number"==r?ed(i)&&eP(t,i.length):"string"==r&&(t in i))&&o(i[t],e)}(t[0],t[1],n)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&eX(e,a,i)}return e},eY=eH((eY=void 0,eZ.length-1),0),function(){for(var e=arguments,t=-1,i=eH(e.length-eY,0),o=Array(i);++t<i;)o[t]=e[eY+t];t=-1;for(var r=Array(eY+1);++t<eY;)r[t]=e[t];return r[eY]=eN(o),eB(eZ,this,r)}),eJ+""));var eK,eG,eJ,eZ,eY,eX,eQ=function(){return(eQ=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function e1(e){return e.toLowerCase()}var e0=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],e2=/[^A-Z0-9]+/gi;function e3(e,t,i){return t instanceof RegExp?e.replace(t,i):t.reduce(function(e,t){return e.replace(t,i)},e)}let e5="win32"===navigator.platform.toLowerCase()?i.win32:i.posix,e4=function(e,t){var i;return void 0===t&&(t={}),void 0===(i=eQ({delimiter:"_"},t))&&(i={}),function(e,t){void 0===t&&(t={});for(var i=t.splitRegexp,o=t.stripRegexp,r=t.transform,s=void 0===r?e1:r,n=t.delimiter,a=void 0===n?" ":n,c=e3(e3(e,void 0===i?e0:i,"$1\x00$2"),void 0===o?e2:o,"\x00"),l=0,h=c.length;"\x00"===c.charAt(l);)l++;for(;"\x00"===c.charAt(h-1);)h--;return c.slice(l,h).split("\x00").map(s).join(a)}(e,eQ({delimiter:"."},i))};function e6(e,t){let i,o,r=!1,s=t=>i=>{e&&clearTimeout(e),t(i),r=!0},n=new Promise((r,n)=>{i=s(r),o=s(n),e&&(e=setTimeout(()=>o(Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:e=>t=e,resolve:i,reject:o,promise:n,get settled(){return r}}}var e9=r(227),e8=r.n(e9);let e7="application/x-postmate-v1+json",te=0,tt={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},ti=(e,t)=>!("string"==typeof t&&e.origin!==t||!e.data||"object"==typeof e.data&&!("postmate"in e.data)||e.data.type!==e7||!tt[e.data.postmate]);class to{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!ti(e,this.childOrigin))return!1;let{data:t,name:i}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&i in this.events&&this.events[i].forEach(e=>{e.call(this,t)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(t=>{let i=++te,o=e=>{e.data.uid===i&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",o,!1),t(e.data.value))};this.parent.addEventListener("message",o,!1),this.child.postMessage({postmate:"request",type:e7,property:e,uid:i},this.childOrigin)})}call(e,t){this.child.postMessage({postmate:"call",type:e7,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class tr{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",e=>{if(!ti(e,this.parentOrigin))return;let{property:t,uid:i,data:o}=e.data;"call"!==e.data.postmate?((e,t)=>{let i="function"==typeof e[t]?e[t]():e[t];return Promise.resolve(i)})(this.model,t).then(o=>{e.source.postMessage({property:t,postmate:"reply",type:e7,uid:i,value:o},e.origin)}):t in this.model&&"function"==typeof this.model[t]&&this.model[t](o)})}emit(e,t){this.parent.postMessage({postmate:"emit",type:e7,value:{name:e,data:t}},this.parentOrigin)}}class ts{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){let t=(e=>{let t=document.createElement("a");t.href=e;let i=t.protocol.length>4?t.protocol:window.location.protocol,o=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${i}//${o}`})(e=e||this.url),i,o=0;return new Promise((r,s)=>{let n=e=>!!ti(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(i),this.parent.removeEventListener("message",n,!1),this.childOrigin=e.origin,r(new to(this))):s("Failed handshake"));this.parent.addEventListener("message",n,!1);let a=()=>{o++,this.child.postMessage({postmate:"handshake",type:e7,model:this.model},t),5===o&&clearInterval(i)};this.frame.addEventListener("load",()=>{a(),i=setInterval(a,500)}),this.frame.src=e})}}class tn{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,t)=>{let i=o=>{if(o.data.postmate){if("handshake"===o.data.postmate){this.child.removeEventListener("message",i,!1),o.source.postMessage({postmate:"handshake-reply",type:e7},o.origin),this.parentOrigin=o.origin;let t=o.data.model;return t&&Object.keys(t).forEach(e=>{this.model[e]=t[e]}),e(new tr(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",i,!1)})}}var ta=r(729),tc=r.n(ta);let{importHTML:tl,createSandboxContainer:th}=window.QSandbox||{};function tu(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(t,i)=>{try{let i=await window.apis.doAction(["readFile",e]);t({text:()=>i})}catch(e){console.error(e),i(e)}}))}class td extends tc(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){let{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;let{template:i,execScripts:o}=await tl(t,{fetch:tu});this._mount(i,document.body);let r=th(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;r.__shadow_mode__=!0,r.LSPluginLocal=this._pluginLocal,r.LSPluginShadow=this,r.LSPluginUser=r.logseq=new tT(this._pluginLocal.toJSON(),this._pluginLocal.caller);let s=await o(r,!0);this._unmountFns.push(s.unmount),this._loaded=!0}_mount(e,t){let i=this._frame=document.createElement("div");i.classList.add("lsp-shadow-sandbox"),i.id=this._pluginLocal.id,this._root=i.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(i),this.emit("mounted")}_unmount(){for(let e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}let tp=e8()("LSPlugin:caller"),tm="#await#response#",tg="#lspmsg#error#",tf=e=>`#lspmsg#${e}`;class ty extends tc(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;let{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;let t=this,i=null!=this._pluginLocal,o=0,r=new Map,s=e6(5e3),n=this._extendUserModel({"#lspmsg#ready#":async e=>{n[tf(e?.pid)]=({type:e,payload:i})=>{tp(`[host (_call) -> *user] ${this._debugTag}`,e,i),t.emit(e,i)},await s.resolve()},"#lspmsg#beforeunload#":async e=>{let i=e6(1e4);t.emit("beforeunload",Object.assign({actor:i},e)),await i.promise},"#lspmsg#settings#":async({type:e,payload:i})=>{t.emit("settings:changed",i)},"#lspmsg#":async({ns:e,type:i,payload:o})=>{tp(`[host (async) -> *user] ${this._debugTag} ns=${e} type=${i}`,o),e&&e.startsWith("hook")?t.emit(`${e}:${i}`,o):t.emit(i,o)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(tp(`[sync host -> *user] #${e}`,t),r.has(e)){let i=r.get(e);i&&(t?.hasOwnProperty(tg)?i.reject(t[tg]):i.resolve(t),r.delete(e))}},...e});if(i)return await s.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));let a=new tn(n).sendHandshakeReply();return this._status="pending",await a.then(e=>{this._child=e,this._connected=!0,this._call=async(t,i={},s)=>{if(s){let e=++o;r.set(e,s),i._sync=e,s.setTag(`async call #${e}`),tp(`async call #${e}`)}return e.emit(tf(n.baseInfo.id),{type:t,payload:i}),s?.promise},this._callUserModel=async(e,t)=>{try{n[e](t)}catch(t){tp(`[model method] #${e} not existed`)}},setInterval(()=>{if(r.size>100)for(let[e,t]of r)t.settled&&r.delete(e)},18e5)}).finally(()=>{this._status=void 0}),await s.promise,n.baseInfo}async call(e,t={}){return this._call?.call(this,e,t)}async callAsync(e,t={}){let i=e6(1e4);return this._call?.call(this,e,t,i)}async callUserModel(e,t={}){return this._callUserModel?.call(this,e,t)}async _setupIframeSandbox(){let e=this._pluginLocal,t=e.id,i=`${t}_lsp_main`,o=new URL(e.options.entry);o.searchParams.set("__v__",e.options.version);let r=document.querySelector(`#${i}`);r&&r.parentElement.removeChild(r);let s=document.createElement("div");s.classList.add("lsp-iframe-sandbox-container"),s.id=i,s.dataset.pid=t;try{let e=(await this._pluginLocal._loadLayoutsData())?.$$0;if(e){s.dataset.inited_layout="true";let{width:t,height:i,left:o,top:r}=e;Object.assign(s.style,{width:t+"px",height:i+"px",left:o+"px",top:r+"px"})}}catch(e){console.error("[Restore Layout Error]",e)}document.body.appendChild(s);let n,a=new ts({id:t+"_iframe",container:s,url:o.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise((t,i)=>{n=setTimeout(()=>{i(Error("handshake Timeout"))},3e3),a.then(i=>{this._parent=i,this._connected=!0,this.emit("connected"),i.on(tf(e.id),({type:e,payload:t})=>{tp("[user -> *host] ",e,t),this._pluginLocal?.emit(e,t||{})}),this._call=async(...t)=>{await i.call(tf(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,t)=>{if(e.startsWith(tm))return await i.get(e.replace(tm,""));i.call(e,t)},t(null)}).catch(e=>{i(e)}).finally(()=>{clearTimeout(n)})}).catch(e=>{throw tp("[iframe sandbox] error",e),e}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){let e=this._pluginLocal,t=this._shadow=new td(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,i={},o)=>(o&&(i.actor=o),this._pluginLocal?.emit(t,Object.assign(i,{$$pid:e.id})),o?.promise),this._callUserModel=async(...e)=>{let t=e[0];t?.startsWith(tm)&&(t=t.replace(tm,""));let i=e[1]||{},o=this._userModel[t];"function"==typeof o&&await o.call(null,i)}}catch(e){throw tp("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class tv{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class tw{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...t){let i=this.ensureHostScope();return e=e4(e)?.toLowerCase(),i.logseq.api["exper_"+e]?.apply(i,t)}async loadScripts(...e){(e=e.map(e=>e?.startsWith("http")?e:this.ctx.resolveResourceFullUrl(e))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,t){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,t)}registerExtensionsEnhancer(e,t){let i=this.ensureHostScope();return"katex"===e&&i.katex&&t(i.katex).catch(console.error),i.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,t)}ensureHostScope(){if(window===top)throw Error("Can not access host scope!");return top}}let tb=Symbol.for("proxy-continue"),t_=e8()("LSPlugin:user");function tC(e,t,i){if("function"!=typeof i)return!1;let{key:o,label:r,desc:s,palette:n,keybinding:a}=t,c=`SimpleCommandHook${o}${++tk}`;this.Editor["on"+c](i),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:r,type:e,desc:s,keybinding:a},["editor/hook",c]],n]})}let tx=null,tj={async getInfo(e){return tx||(tx=await this._execCallableAPIAsync("get-app-info")),"string"==typeof e?tx[e]:tx},registerCommand:tC,registerCommandPalette(e,t){let{key:i,label:o,keybinding:r}=e;return tC.call(this,"$palette$",{key:i,label:o,palette:!0,keybinding:r},t)},registerCommandShortcut(e,t){let{binding:i}=e,o="$shortcut$",r=o+e4(i);return tC.call(this,o,{key:r,palette:!1,keybinding:e},t)},registerUIItem(e,t){let i=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[i,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;let i=e+"_"+this.baseInfo.id;tC.call(this,"page-menu-item",{key:i,label:e},t)},setFullScreen(e){let t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then(e=>{e?t():t(!0)}):e?t(!0):t()}},tk=0,tE={registerSlashCommand(e,t){t_("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(e=>{let[t,...i]=e;if("editor/hook"===t){let o=i[0],r=()=>{this.caller?.callUserModel(o)};"function"==typeof o&&(r=o);let s=`SlashCommandHook${t}${++tk}`;e[1]=s,this.Editor["on"+s](r)}return e}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;let i=e+"_"+this.baseInfo.id;tC.call(this,"block-context-menu-item",{key:i,label:e},t)},scrollToBlockInPage(e,t,i){let o="block-content-"+t;i?.replaceState?this.App.replaceState("page",{name:e},{anchor:o}):this.App.pushState("page",{name:e},{anchor:o})}},tS={onBlockChanged(e,t){let i=this.baseInfo.id,o=`hook:db:${e4(`block:${e}`)}`,r=({block:i,txData:o,txMeta:r})=>{i.uuid===e&&t(i,o,r)};return this.caller.on(o,r),this.App._installPluginHook(i,o),()=>{this.caller.off(o,r),this.App._uninstallPluginHook(i,o)}}},tL={},tA={},tF={};class tT extends tc(){_baseInfo;_caller;_version="0.0.6";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mExperiments;_beforeunloadCallback;constructor(e,t){super(),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",e=>{e?.toggle&&this.toggleMainUI()}),t.on("settings:changed",e=>{let t=Object.assign({},this.settings),i=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...i},t)}),t.on("beforeunload",async e=>{let{actor:i,...o}=e,r=this._beforeunloadCallback;try{r&&await r(o),i?.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),i?.reject(e)}})}async ready(e,t){if(!this._connected)try{"function"==typeof e&&(t=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=eW(this._baseInfo,i),this._settingsSchema&&(i.settings=function(e,t){let i=(t||[]).reduce((e,t)=>("default"in t&&(e[t.key]=t.default),e),{});return Object.assign(i,e)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),i?.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(e){console.warn(e)}t&&t.call(this,i)}catch(e){console.error(`${this._debugTag} [Ready Error]`,e)}}ensureConnected(){if(!this._connected)throw Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){let t="settings:changed";return this.on(t,e),()=>this.off(t,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){let t={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){let t={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){let e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){let e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...t){try{let i=new URL(e);if(!i.origin)throw Error(null);let o=e5.join(e.substr(i.origin.length),...t);return i.origin+o}catch(i){return e5.join(e,...t)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){let i=this,o=this.caller;return new Proxy(e,{get(e,r,s){let n=e[r];return function(...e){if(n){let o=n.apply(i,e.concat(t));if(o!==tb)return o}if(t){let s=r.toString().match(/^(once|off|on)/i);if(null!=s){let r=s[0].toLowerCase(),n=s.input.slice(r.length),a=i.baseInfo.id,c=`hook:${t}:${e4(n)}`,l=e[0];o[r](c,l);let h=()=>{o.off(c,l),o.listenerCount(c)||i.App._uninstallPluginHook(a,c)};return"off"===r?void h():(i.App._installPluginHook(a,c),h)}}let s=r;return["git","ui","assets"].includes(t)&&(s=t+"_"+s),o.callAsync("api:call",{tag:t,method:s,args:e})}}})}_execCallableAPIAsync(e,...t){return this._caller.callAsync("api:call",{method:e,args:t})}_execCallableAPI(e,...t){this._caller.call("api:call",{method:e,args:t})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(tj,"app")}get Editor(){return this._makeUserProxy(tE,"editor")}get DB(){return this._makeUserProxy(tS,"db")}get Git(){return this._makeUserProxy(tL,"git")}get UI(){return this._makeUserProxy(tA,"ui")}get Assets(){return this._makeUserProxy(tF,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new tv(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new tw(this)),e}}function tP(e,t){return new tT(e,t)}if(null==window.__LSP__HOST__){let e=new ty(null);window.logseq=tP({},e)}})(),s})()}),y("cVm5l");var v=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},w=(e,t,i)=>(v(e,t,"read from private field"),i?i.call(e):t.get(e)),b=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},_=(e,t,i,o)=>(v(e,t,"write to private field"),o?o.call(e,i):t.set(e,i),i),C=(e,t,i)=>(v(e,t,"access private method"),i);async function x(e,t={}){let i;let{local:o=!1,version:r="latest",cdnUrl:s,...n}=t,a=(i=`https://cdn.jsdelivr.net/npm/emojibase-data@${r}/${e}`,"function"==typeof s?i=s(e,r):"string"==typeof s&&(i=`${s}/${e}`),i),c=o?localStorage:sessionStorage,l=`emojibase/${r}/${e}`,h=c.getItem(l);if(h)return Promise.resolve(JSON.parse(h));let u=await fetch(a,{credentials:"omit",mode:"cors",redirect:"error",...n});if(!u.ok)throw Error("Failed to load Emojibase dataset.");let d=await u.json();try{c.setItem(l,JSON.stringify(d))}catch{}return d}const j={discord:"joypixels",slack:"iamcal"};async function k(e,t,i){var o;return x(`${e}/shortcodes/${null!==(o=j[t])&&void 0!==o?o:t}.json`,i)}function E(e,t){if(0===t.length)return e;let i=new Set(e.shortcodes);return t.forEach(t=>{let o=t[e.hexcode];Array.isArray(o)?o.forEach(e=>i.add(e)):o&&i.add(o)}),e.shortcodes=[...i],e.skins&&e.skins.forEach(e=>{E(e,t)}),e}async function S(e,t={}){var i;let{compact:o=!1,flat:r=!1,shortcodes:s=[],...n}=t,a=await x(`${e}/${o?"compact":"data"}.json`,n),c=[];return s.length>0&&(c=await Promise.all(s.map(t=>{let i;if(t.includes("/")){let[e,o]=t.split("/");i=k(e,o,n)}else i=k(e,t,n);return i.catch(()=>({}))}))),r?function(e,t=[]){let i=[];return e.forEach(e=>{if(e.skins){let{skins:o,...r}=e;i.push(E(r,t)),o.forEach(e=>{let o={...e};r.tags&&(o.tags=[...r.tags]),i.push(E(o,t))})}else i.push(E(e,t))}),i}(a,c):(0===(i=c).length||a.forEach(e=>{E(e,i)}),a)}async function L(e,t){return x(`${e}/messages.json`,t)}function A(e,t){let i=e.target.closest("[data-emoji]");if(i){let e=t.find(e=>e.emoji===i.dataset.emoji);if(e)return e}return null}function F(e){var t;let i=null==(t=window.matchMedia)?void 0:t.call(window,"(prefers-reduced-motion: reduce)");return e.animate&&!(null!=i&&i.matches)}function T(e,t){return e.toLowerCase().includes(t.toLowerCase())}function P(e,t,i,o){if(F(o)&&e.animate)return e.animate(t,i).finished;let r="normal"===i.direction?1:0,s=Object.entries(t).reduce((e,[t,i])=>({...e,[t]:i[r]}),{});return Object.assign(e.style,s),Promise.resolve()}function O(e){var t;let i=document.createElement("template");return i.innerHTML=e,null==(t=i.content)?void 0:t.firstElementChild}async function z(e){let t=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map(e=>e.toString(16).padStart(2,"0")).join("")}function I(...e){return e.reduce((e,t)=>({...e,[t]:M(t)}),{})}function M(e){return`picmo__${e}`}function R(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function $(e,...t){R(e).append(...t)}function D(e){try{return window[e].length,!0}catch{return!1}}function N(e){var t;return{emoji:e.emoji,label:e.label,tags:e.tags,skins:null==(t=e.skins)?void 0:t.map(e=>N(e)),order:e.order,custom:!1,hexcode:e.hexcode,version:e.version}}function B(e,t,i){var o;return(!i||!!i.some(t=>t.order===e.group))&&(T(e.label,t)||(null==(o=e.tags)?void 0:o.some(e=>T(e,t))))}class H{constructor(e="en"){this.locale=e}}const U=[(e,t)=>("1F91D"===e.hexcode&&t<14&&(e.skins=[]),e),(e,t)=>(e.skins&&(e.skins=e.skins.filter(e=>!e.version||e.version<=t)),e)];function V(e,t){return e.filter(e=>null!==(U.some(i=>null===i(e,t))?null:e))}const q={};function W(e){return q[e]||(q[e]=new K(e)),q[e]}W.deleteDatabase=e=>{};class K extends H{open(){return Promise.resolve()}delete(){return Promise.resolve()}close(){}isPopulated(){return Promise.resolve(!1)}getEmojiCount(){return Promise.resolve(this.emojis.length)}getEtags(){return Promise.resolve({foo:"bar"})}getHash(){return Promise.resolve("")}populate(e){return this.categories=e.groups,this.emojis=e.emojis,Promise.resolve()}getCategories(e){var t;let i=this.categories.filter(e=>"component"!==e.key);if(e.showRecents&&i.unshift({key:"recents",order:-1}),null!=(t=e.custom)&&t.length&&i.push({key:"custom",order:10}),e.categories){let t=e.categories;(i=i.filter(e=>t.includes(e.key))).sort((e,i)=>t.indexOf(e.key)-t.indexOf(i.key))}else i.sort((e,t)=>e.order-t.order);return Promise.resolve(i)}getEmojis(e,t){let i=this.emojis.filter(t=>t.group===e.order).filter(e=>e.version<=t).sort((e,t)=>null!=e.order&&null!=t.order?e.order-t.order:0).map(N);return Promise.resolve(V(i,t))}searchEmojis(e,t,i,o){let r=this.emojis.filter(t=>B(t,e,o)&&t.version<=i).map(N),s=t.filter(t=>B(t,e,o)),n=[...V(r,i),...s];return Promise.resolve(n)}setMeta(e){this.meta=e}}async function G(e){try{return(await fetch(e,{method:"HEAD"})).headers.get("etag")}catch{return null}}async function J(e,t,i){let o;try{o=await e.getEtags()}catch{o={}}let{storedEmojisEtag:r,storedMessagesEtag:s}=o;if(i!==s||t!==r){let[o,r]=await Promise.all([L(e.locale),S(e.locale)]);await e.populate({groups:o.groups,emojis:r,emojisEtag:t,messagesEtag:i})}}async function Z(e,t){let i=await e.getHash();return t!==i}async function Y(e,t,i){let o=i||t(e);try{await o.open()}catch{console.warn("[picmo] IndexedDB not available, falling back to InMemoryStoreFactory"),o=W(e)}return o}async function X(e,t,i){if(!D("sessionStorage")&&"u">typeof window)throw Error("Session storage is required to use CDN emoji data.");let o=await Y(e,t,i),[r,s]=await function(e){let{emojisUrl:t,messagesUrl:i}=function(e,t){let i=`https://cdn.jsdelivr.net/npm/emojibase-data@${e}/${t}`;return{emojisUrl:`${i}/data.json`,messagesUrl:`${i}/messages.json`}}("latest",e);try{return Promise.all([G(t),G(i)])}catch{return Promise.all([null,null])}}(e);if(await o.isPopulated())r&&s&&await J(o,r,s);else{let[t,i]=await Promise.all([L(e),S(e)]);await o.populate({groups:t.groups,emojis:i,emojisEtag:r,messagesEtag:s})}return o}async function Q(e,t,i,o,r){let s=await Y(e,t,r),n=await z(o);return(!await s.isPopulated()||await Z(s,n))&&await s.populate({groups:i.groups,emojis:o,hash:n}),s}async function ee(e,t,i,o,r){return i&&o?Q(e,t,i,o,r):X(e,t,r)}class et{constructor(){this.handleKeyDown=this.handleKeyDown.bind(this)}activate(e){this.rootElement=e,this.rootElement.addEventListener("keydown",this.handleKeyDown)}deactivate(){var e;null==(e=this.rootElement)||e.removeEventListener("keydown",this.handleKeyDown)}get focusableElements(){return this.rootElement.querySelectorAll('input, [tabindex="0"]')}get lastFocusableElement(){return this.focusableElements[this.focusableElements.length-1]}get firstFocusableElement(){return this.focusableElements[0]}checkFocus(e,t,i){e.target===t&&(i.focus(),e.preventDefault())}handleKeyDown(e){"Tab"===e.key&&this.checkFocus(e,e.shiftKey?this.firstFocusableElement:this.lastFocusableElement,e.shiftKey?this.lastFocusableElement:this.firstFocusableElement)}}const{light:ei,dark:eo,auto:er}=I("light","dark","auto");class es{constructor({template:e,classes:t,parent:i}){this.isDestroyed=!1,this.appEvents={},this.uiEvents=[],this.uiElements={},this.ui={},this.template=e,this.classes=t,this.parent=i,this.keyBindingHandler=this.keyBindingHandler.bind(this)}initialize(){this.bindAppEvents()}setCustomEmojis(e){this.customEmojis=e}setEvents(e){this.events=e}setPickerId(e){this.pickerId=e}emit(e,...t){this.events.emit(e,...t)}setI18n(e){this.i18n=e}setRenderer(e){this.renderer=e}setEmojiData(e){this.emojiDataPromise=e,e.then(e=>{this.emojiData=e})}updateEmojiData(e){this.emojiData=e,this.emojiDataPromise=Promise.resolve(e)}setOptions(e){this.options=e}renderSync(e={}){return this.el=this.template.renderSync({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId,...e}),this.postRender(),this.el}async render(e={}){return await this.emojiDataPromise,this.el=await this.template.renderAsync({classes:this.classes,i18n:this.i18n,pickerId:this.pickerId,...e}),this.postRender(),this.el}postRender(){this.bindUIElements(),this.bindKeyBindings(),this.bindUIEvents(),this.scheduleShowAnimation()}bindAppEvents(){Object.keys(this.appEvents).forEach(e=>{this.events.on(e,this.appEvents[e],this)}),this.events.on("data:ready",this.updateEmojiData,this)}unbindAppEvents(){Object.keys(this.appEvents).forEach(e=>{this.events.off(e,this.appEvents[e])}),this.events.off("data:ready",this.updateEmojiData)}keyBindingHandler(e){let t=this.keyBindings[e.key];t&&t.call(this,e)}bindKeyBindings(){this.keyBindings&&this.el.addEventListener("keydown",this.keyBindingHandler)}unbindKeyBindings(){this.keyBindings&&this.el.removeEventListener("keydown",this.keyBindingHandler)}bindUIElements(){this.ui=Object.keys(this.uiElements).reduce((e,t)=>({...e,[t]:this.el.querySelector(this.uiElements[t])}),{})}bindUIEvents(){this.uiEvents.forEach(e=>{e.handler=e.handler.bind(this),(e.target?this.ui[e.target]:this.el).addEventListener(e.event,e.handler,e.options)})}unbindUIEvents(){this.uiEvents.forEach(e=>{(e.target?this.ui[e.target]:this.el).removeEventListener(e.event,e.handler)})}destroy(){this.unbindAppEvents(),this.unbindUIEvents(),this.unbindKeyBindings(),this.el.remove(),this.isDestroyed=!0}scheduleShowAnimation(){if(this.parent){let e=new MutationObserver(t=>{let[i]=t;"childList"===i.type&&i.addedNodes[0]===this.el&&(F(this.options)&&this.animateShow&&this.animateShow(),e.disconnect)});e.observe(this.parent,{childList:!0})}}static childEvent(e,t,i,o={}){return{target:e,event:t,handler:i,options:o}}static uiEvent(e,t,i={}){return{event:e,handler:t,options:i}}static byClass(e){return`.${e}`}}const en=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient gradientUnits="userSpaceOnUse" cy="10%" id="gradient-0">
      <stop offset="0" stop-color="hsl(50, 100%, 50%)" />
      <stop offset="1" stop-color="hsl(50, 100%, 60%)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="172.586" cy="207.006" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="334.523" cy="207.481" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="313.325" cy="356.208" rx="91.497" ry="59.893"/>
  <path fill="#55a7ff" d="M 159.427 274.06 L 102.158 363.286 L 124.366 417.011 L 160.476 423.338 L 196.937 414.736 L 218.502 375.214"></path>
  <path fill="url(#gradient-0)" d="M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM256 352C290.9 352 323.2 367.8 348.3 394.9C354.3 401.4 364.4 401.7 370.9 395.7C377.4 389.7 377.7 379.6 371.7 373.1C341.6 340.5 301 320 256 320C247.2 320 240 327.2 240 336C240 344.8 247.2 352 256 352H256zM208 369C208 349 179.6 308.6 166.4 291.3C163.2 286.9 156.8 286.9 153.6 291.3C140.6 308.6 112 349 112 369C112 395 133.5 416 160 416C186.5 416 208 395 208 369H208zM303.6 208C303.6 225.7 317.1 240 335.6 240C353.3 240 367.6 225.7 367.6 208C367.6 190.3 353.3 176 335.6 176C317.1 176 303.6 190.3 303.6 208zM207.6 208C207.6 190.3 193.3 176 175.6 176C157.1 176 143.6 190.3 143.6 208C143.6 225.7 157.1 240 175.6 240C193.3 240 207.6 225.7 207.6 208z" />
</svg>`,ea=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient id="radial" cy="85%">
      <stop offset="20%" stop-color="var(--color-secondary)" />
      <stop offset="100%" stop-color="var(--color-primary)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path fill="url('#radial')" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z" />
</svg>`,ec={clock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"/></svg>',frown:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240zM336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176zM259.9 369.4C288.8 369.4 316.2 375.2 340.6 385.5C352.9 390.7 366.7 381.3 361.4 369.1C344.8 330.9 305.6 303.1 259.9 303.1C214.3 303.1 175.1 330.8 158.4 369.1C153.1 381.3 166.1 390.6 179.3 385.4C203.7 375.1 231 369.4 259.9 369.4L259.9 369.4z"/></svg>',gamepad:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M448 64H192C85.96 64 0 149.1 0 256s85.96 192 192 192h256c106 0 192-85.96 192-192S554 64 448 64zM247.1 280h-32v32c0 13.2-10.78 24-23.98 24c-13.2 0-24.02-10.8-24.02-24v-32L136 279.1C122.8 279.1 111.1 269.2 111.1 256c0-13.2 10.85-24.01 24.05-24.01L167.1 232v-32c0-13.2 10.82-24 24.02-24c13.2 0 23.98 10.8 23.98 24v32h32c13.2 0 24.02 10.8 24.02 24C271.1 269.2 261.2 280 247.1 280zM431.1 344c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40s39.1 17.88 39.1 40S454.1 344 431.1 344zM495.1 248c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40c22.12 0 39.1 17.88 39.1 40S518.1 248 495.1 248z"/></svg>',lightbulb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>',mug:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M512 32H120c-13.25 0-24 10.75-24 24L96.01 288c0 53 43 96 96 96h192C437 384 480 341 480 288h32c70.63 0 128-57.38 128-128S582.6 32 512 32zM512 224h-32V96h32c35.25 0 64 28.75 64 64S547.3 224 512 224zM560 416h-544C7.164 416 0 423.2 0 432C0 458.5 21.49 480 48 480h480c26.51 0 48-21.49 48-48C576 423.2 568.8 416 560 416z"/></svg>',plane:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z"/></svg>',robot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M9.375 233.4C3.375 239.4 0 247.5 0 256v128c0 8.5 3.375 16.62 9.375 22.62S23.5 416 32 416h32V224H32C23.5 224 15.38 227.4 9.375 233.4zM464 96H352V32c0-17.62-14.38-32-32-32S288 14.38 288 32v64H176C131.8 96 96 131.8 96 176V448c0 35.38 28.62 64 64 64h320c35.38 0 64-28.62 64-64V176C544 131.8 508.3 96 464 96zM256 416H192v-32h64V416zM224 296C201.9 296 184 278.1 184 256S201.9 216 224 216S264 233.9 264 256S246.1 296 224 296zM352 416H288v-32h64V416zM448 416h-64v-32h64V416zM416 296c-22.12 0-40-17.88-40-40S393.9 216 416 216S456 233.9 456 256S438.1 296 416 296zM630.6 233.4C624.6 227.4 616.5 224 608 224h-32v192h32c8.5 0 16.62-3.375 22.62-9.375S640 392.5 640 384V256C640 247.5 636.6 239.4 630.6 233.4z"/></svg>',sad:en,search:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',smiley:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256.3 331.8C208.9 331.8 164.1 324.9 124.5 312.8C112.2 309 100.2 319.7 105.2 331.5C130.1 390.6 188.4 432 256.3 432C324.2 432 382.4 390.6 407.4 331.5C412.4 319.7 400.4 309 388.1 312.8C348.4 324.9 303.7 331.8 256.3 331.8H256.3zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"/></svg>',symbols:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"/></svg>',tree:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M413.8 447.1L256 448l0 31.99C256 497.7 241.8 512 224.1 512c-17.67 0-32.1-14.32-32.1-31.99l0-31.99l-158.9-.0099c-28.5 0-43.69-34.49-24.69-56.4l68.98-79.59H62.22c-25.41 0-39.15-29.8-22.67-49.13l60.41-70.85H89.21c-21.28 0-32.87-22.5-19.28-37.31l134.8-146.5c10.4-11.3 28.22-11.3 38.62-.0033l134.9 146.5c13.62 14.81 2.001 37.31-19.28 37.31h-10.77l60.35 70.86c16.46 19.34 2.716 49.12-22.68 49.12h-15.2l68.98 79.59C458.7 413.7 443.1 447.1 413.8 447.1z"/></svg>',users:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3c-95.73 0-173.3 77.6-173.3 173.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM479.1 320h-73.85C451.2 357.7 480 414.1 480 477.3C480 490.1 476.2 501.9 470 512h138C625.7 512 640 497.6 640 479.1C640 391.6 568.4 320 479.1 320zM432 256C493.9 256 544 205.9 544 144S493.9 32 432 32c-25.11 0-48.04 8.555-66.72 22.51C376.8 76.63 384 101.4 384 128c0 35.52-11.93 68.14-31.59 94.71C372.7 243.2 400.8 256 432 256z"/></svg>',warning:ea,xmark:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>'},el={recents:"clock","smileys-emotion":"smiley","people-body":"users","animals-nature":"tree","food-drink":"mug",activities:"gamepad","travel-places":"plane",objects:"lightbulb",symbols:"symbols",flags:"flag",custom:"robot"};function eh(e,t){if(!(e in ec))return console.warn(`Unknown icon: "${e}"`),document.createElement("div");let i=function(e,t){let i=O(t);return i.dataset.icon=e,i.classList.add(M("icon")),i}(e,ec[e]);return t&&i.classList.add(M(`icon-${t}`)),i}const eu={mode:"sync"};class ed{constructor(o,s={}){b(this,i),b(this,r),b(this,n),b(this,e,void 0),b(this,t,void 0),_(this,e,o),_(this,t,s.mode||eu.mode)}renderSync(t={}){let c=O(w(this,e).call(this,t));return C(this,n,a).call(this,c,t),C(this,r,s).call(this,c),C(this,i,o).call(this,c,t),c}async renderAsync(t={}){let c=O(w(this,e).call(this,t));return C(this,n,a).call(this,c,t),C(this,r,s).call(this,c),await C(this,i,o).call(this,c,t),c}render(e){return"sync"===w(this,t)?this.renderSync(e):this.renderAsync(e)}}e=new WeakMap,t=new WeakMap,i=new WeakSet,o=async function(e,t){let i=e.querySelectorAll("[data-view]"),o=[];for(let e of i){let i=t[e.dataset.view];i?"sync"!==e.dataset.render?o.push(i.render().then(t=>(e.replaceWith(t),t))):e.replaceWith(i.renderSync()):e.remove()}return Promise.all(o)},r=new WeakSet,s=function(e){e.querySelectorAll("i[data-icon]").forEach(e=>{let{icon:t,size:i}=e.dataset;e.replaceWith(eh(t,i))})},n=new WeakSet,a=function(e,t){return e.querySelectorAll("[data-placeholder]").forEach(e=>{let i=e.dataset.placeholder;if(i&&t[i]){let o=t[i];e.replaceWith(...[o].flat())}else console.warn(`Missing placeholder element for key "${i}"`)}),e};const ep=I("imagePlaceholder","placeholder"),em=new ed(({classes:e})=>`
  <div class="${e.placeholder} ${e.imagePlaceholder}"></div>
`);class eg extends es{constructor({classNames:e}={}){super({template:em,classes:ep}),this.classNames=e}load(e){let t=document.createElement("img");this.classNames&&(t.className=this.classNames),t.addEventListener("load",()=>{this.el.replaceWith(t)},{once:!0}),Promise.resolve(e).then(e=>t.src=e)}renderSync(){return super.renderSync(),this.classNames&&this.classNames.split(" ").forEach(e=>this.el.classList.add(e)),this.el}}const ef=I("customEmoji");class ey{renderElement(e){return{content:e}}renderImage(e="",t){let i=new eg({classNames:e});return i.renderSync(),{content:i,resolver:()=>(i.load(t()),i.el)}}doRender(e,t,i){if(e.custom)return this.renderCustom(e,t,i);let{content:o,resolver:r}=this.render(e,i),s=o instanceof Element?o:o.el;return r&&r(),s}doEmit(e){return e.custom?this.emitCustom(e):this.emit(e)}emitCustom({url:e,label:t,emoji:i,data:o}){return{url:e,label:t,emoji:i,data:o}}renderCustom(e,t,i=""){let o=[ef.customEmoji,i].join(" ").trim(),{content:r,resolver:s}=this.renderImage(o,()=>e.url),n=r instanceof Element?r:r.el;return s&&s(),n}}const ev=new ed(({emoji:e})=>`<span>${e}</span>`);class ew extends ey{render(e){return this.renderElement(ev.renderSync({emoji:e.emoji}))}emit({emoji:e,hexcode:t,label:i}){return{emoji:e,hexcode:t,label:i}}}const eb="PicMo";function e_(e){return new eC(e)}e_.deleteDatabase=e=>new Promise((t,i)=>{let o=indexedDB.deleteDatabase(`${eb}-${e}`);o.addEventListener("success",t),o.addEventListener("error",i)});class eC extends H{async open(){let e=indexedDB.open(`${eb}-${this.locale}`);return new Promise((t,i)=>{e.addEventListener("success",e=>{var i;this.db=null==(i=e.target)?void 0:i.result,t()}),e.addEventListener("error",i),e.addEventListener("upgradeneeded",async e=>{var t;this.db=null==(t=e.target)?void 0:t.result,this.db.createObjectStore("category",{keyPath:"order"});let i=this.db.createObjectStore("emoji",{keyPath:"emoji"});i.createIndex("category","group"),i.createIndex("version","version"),this.db.createObjectStore("meta")})})}async delete(){this.close();let e=indexedDB.deleteDatabase(`${eb}-${this.locale}`);await this.waitForRequest(e)}close(){this.db.close()}async getEmojiCount(){let e=this.db.transaction("emoji","readonly").objectStore("emoji");return(await this.waitForRequest(e.count())).target.result}async getEtags(){let e=this.db.transaction("meta","readonly").objectStore("meta"),[t,i]=await Promise.all([this.waitForRequest(e.get("emojisEtag")),this.waitForRequest(e.get("messagesEtag"))]);return{storedEmojisEtag:t.target.result,storedMessagesEtag:i.target.result}}async setMeta(e){let t=this.db.transaction("meta","readwrite"),i=t.objectStore("meta");return new Promise(o=>{t.oncomplete=o,Object.keys(e).filter(Boolean).forEach(t=>{i.put(e[t],t)})})}async getHash(){let e=this.db.transaction("meta","readonly").objectStore("meta");return(await this.waitForRequest(e.get("hash"))).target.result}async isPopulated(){let e=this.db.transaction("category","readonly").objectStore("category");return(await this.waitForRequest(e.count())).target.result>0}async populate({groups:e,emojis:t,emojisEtag:i,messagesEtag:o,hash:r}){await this.removeAllObjects("category","emoji");let s=[this.addObjects("category",e),this.addObjects("emoji",t),this.setMeta({emojisEtag:i,messagesEtag:o,hash:r})];await Promise.all(s)}async getCategories(e){var t;let i=this.db.transaction("category","readonly").objectStore("category"),o=(await this.waitForRequest(i.getAll())).target.result.filter(e=>"component"!==e.key);if(e.showRecents&&o.unshift({key:"recents",order:-1}),null!=(t=e.custom)&&t.length&&o.push({key:"custom",order:10}),e.categories){let t=e.categories;(o=o.filter(e=>t.includes(e.key))).sort((e,i)=>t.indexOf(e.key)-t.indexOf(i.key))}else o.sort((e,t)=>e.order-t.order);return o}async getEmojis(e,t){let i=this.db.transaction("emoji","readonly").objectStore("emoji").index("category"),o=(await this.waitForRequest(i.getAll(e.order))).target.result.filter(e=>e.version<=t).sort((e,t)=>null!=e.order&&null!=t.order?e.order-t.order:0).map(N);return V(o,t)}async searchEmojis(e,t,i,o){let r=[];return new Promise((s,n)=>{let a=this.db.transaction("emoji","readonly").objectStore("emoji").openCursor();a.addEventListener("success",n=>{var a;let c=null==(a=n.target)?void 0:a.result;if(!c)return s([...V(r,i),...t.filter(t=>B(t,e))]);let l=c.value;B(l,e,o)&&l.version<=i&&r.push(N(l)),c.continue()}),a.addEventListener("error",e=>{n(e)})})}async waitForRequest(e){return new Promise((t,i)=>{e.onsuccess=t,e.onerror=i})}withTransaction(e,t="readwrite",i){return new Promise((o,r)=>{let s=this.db.transaction(e,t);s.oncomplete=o,s.onerror=r,i(s)})}async removeAllObjects(...e){let t=this.db.transaction(e,"readwrite"),i=e.map(e=>t.objectStore(e));await Promise.all(i.map(e=>this.waitForRequest(e.clear())))}async addObjects(e,t){return this.withTransaction(e,"readwrite",i=>{let o=i.objectStore(e);t.forEach(e=>{o.add(e)})})}}class ex{}const ej="PicMo:recents";class ek extends ex{constructor(e){super(),this.storage=e}clear(){this.storage.removeItem(ej)}getRecents(e){var t;try{return JSON.parse(null!=(t=this.storage.getItem(ej))?t:"[]").slice(0,e)}catch{return[]}}addOrUpdateRecent(e,t){let i=[e,...this.getRecents(t).filter(t=>t.hexcode!==e.hexcode)].slice(0,t);try{this.storage.setItem(ej,JSON.stringify(i))}catch{console.warn("storage is not available, recent emojis will not be saved")}}}class eE extends ek{constructor(){let e;super(D("localStorage")?localStorage:{getItem:t=>e[t],setItem:(t,i)=>e[t]=i,length:Object.keys(e={}).length,clear:()=>e={},key:t=>Object.keys(e)[t],removeItem:t=>delete e[t]})}}const eS={dataStore:e_,theme:ei,animate:!0,showCategoryTabs:!0,showPreview:!0,showRecents:!0,showSearch:!0,showVariants:!0,emojisPerRow:8,visibleRows:6,emojiVersion:"auto",i18n:{"categories.activities":"Activities","categories.animals-nature":"Animals & Nature","categories.custom":"Custom","categories.flags":"Flags","categories.food-drink":"Food & Drink","categories.objects":"Objects","categories.people-body":"People & Body","categories.recents":"Recently Used","categories.smileys-emotion":"Smileys & Emotion","categories.symbols":"Symbols","categories.travel-places":"Travel & Places","error.load":"Failed to load emojis","recents.clear":"Clear recent emojis","recents.none":"You haven't selected any emojis yet.",retry:"Try again","search.clear":"Clear search","search.error":"Failed to search emojis","search.notFound":"No results found",search:"Search emojis..."},locale:"en",maxRecents:50,custom:[]};function eL(e={}){return{...eS,...e,renderer:e.renderer||new ew,recentsProvider:e.recentsProvider||new eE}}class eA{constructor(){b(this,l),b(this,u),b(this,c,/* @__PURE__ */new Map)}on(e,t,i){C(this,u,d).call(this,e,t,i)}once(e,t,i){C(this,u,d).call(this,e,t,i,!0)}off(e,t){let i=C(this,l,h).call(this,e);w(this,c).set(e,i.filter(e=>e.handler!==t))}emit(e,...t){C(this,l,h).call(this,e).forEach(i=>{i.handler.apply(i.context,t),i.once&&this.off(e,i.handler)})}removeAll(){w(this,c).clear()}}c=new WeakMap,l=new WeakSet,h=function(e){return w(this,c).has(e)||w(this,c).set(e,[]),w(this,c).get(e)},u=new WeakSet,d=function(e,t,i,o=!1){C(this,l,h).call(this,e).push({context:i,handler:t,once:o})};const eF={injectStyles:!0};class eT extends eA{}class eP extends eA{}const eO=I("emojiCategory","categoryName","noRecents","recentEmojis");class ez extends es{constructor({template:e,category:t,showVariants:i,lazyLoader:o}){super({template:e,classes:eO}),this.baseUIElements={categoryName:es.byClass(eO.categoryName)},this.category=t,this.showVariants=i,this.lazyLoader=o}setActive(e,t,i){this.emojiContainer.setActive(e,t,i)}}const eI=new ed(({classes:e,emoji:t})=>`
  <button
    type="button"
    class="${e.emojiButton}"
    title="${t.label}"
    data-emoji="${t.emoji}"
    tabindex="-1">
    <div data-placeholder="emojiContent"></div>
  </button>
`),eM=I("emojiButton");class eR extends es{constructor({emoji:e,lazyLoader:t,category:i}){super({template:eI,classes:eM}),this.emoji=e,this.lazyLoader=t,this.category=i}initialize(){this.uiEvents=[es.uiEvent("focus",this.handleFocus)],super.initialize()}handleFocus(){this.category&&this.events.emit("focus:change",this.category)}activateFocus(e){this.el.tabIndex=0,e&&this.el.focus()}deactivateFocus(){this.el.tabIndex=-1}renderSync(){return super.renderSync({emoji:this.emoji,emojiContent:this.renderer.doRender(this.emoji,this.lazyLoader)})}}class e${constructor(e,t,i=0,o=0,r=!1){this.events=new eA,this.keyHandlers={ArrowLeft:this.focusPrevious.bind(this),ArrowRight:this.focusNext.bind(this),ArrowUp:this.focusUp.bind(this),ArrowDown:this.focusDown.bind(this)},this.rowCount=Math.ceil(t/e),this.columnCount=e,this.focusedRow=i,this.focusedColumn=o,this.emojiCount=t,this.wrap=r,this.handleKeyDown=this.handleKeyDown.bind(this)}destroy(){this.events.removeAll()}on(e,t){this.events.on(e,t)}handleKeyDown(e){e.key in this.keyHandlers&&(e.preventDefault(),this.keyHandlers[e.key]())}setCell(e,t,i=!0){let o=this.getIndex();this.focusedRow=e,void 0!==t&&(this.focusedColumn=Math.min(this.columnCount,t)),(this.focusedRow>=this.rowCount||this.getIndex()>=this.emojiCount)&&(this.focusedRow=this.rowCount-1,this.focusedColumn=this.emojiCount%this.columnCount-1),this.events.emit("focus:change",{from:o,to:this.getIndex(),performFocus:i})}setFocusedIndex(e,t=!0){let i=Math.floor(e/this.columnCount),o=e%this.columnCount;this.setCell(i,o,t)}focusNext(){this.focusedColumn<this.columnCount-1&&this.getIndex()<this.emojiCount-1?this.setCell(this.focusedRow,this.focusedColumn+1):this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,0):this.wrap?this.setCell(0,0):this.events.emit("focus:overflow",0)}focusPrevious(){this.focusedColumn>0?this.setCell(this.focusedRow,this.focusedColumn-1):this.focusedRow>0?this.setCell(this.focusedRow-1,this.columnCount-1):this.wrap?this.setCell(this.rowCount-1,this.columnCount-1):this.events.emit("focus:underflow",this.columnCount-1)}focusUp(){this.focusedRow>0?this.setCell(this.focusedRow-1,this.focusedColumn):this.events.emit("focus:underflow",this.focusedColumn)}focusDown(){this.focusedRow<this.rowCount-1?this.setCell(this.focusedRow+1,this.focusedColumn):this.events.emit("focus:overflow",this.focusedColumn)}focusToIndex(e){this.setCell(Math.floor(e/this.columnCount),e%this.columnCount)}getIndex(){return this.focusedRow*this.columnCount+this.focusedColumn}getCell(){return{row:this.focusedRow,column:this.focusedColumn}}getRowCount(){return this.rowCount}}const eD=new ed(({classes:e})=>`
  <div class="${e.emojiContainer}">
    <div data-placeholder="emojis"></div>
  </div>
`),eN=I("emojiContainer");class eB extends es{constructor({emojis:e,showVariants:t,preview:i=!0,lazyLoader:o,category:r,fullHeight:s=!1}){super({template:eD,classes:eN}),this.fullHeight=!1,this.showVariants=t,this.lazyLoader=o,this.preview=i,this.emojis=e,this.category=r,this.fullHeight=s,this.setFocus=this.setFocus.bind(this),this.triggerNextCategory=this.triggerNextCategory.bind(this),this.triggerPreviousCategory=this.triggerPreviousCategory.bind(this)}initialize(){this.grid=new e$(this.options.emojisPerRow,this.emojiCount,0,0,!this.category),this.grid.on("focus:change",this.setFocus),this.grid.on("focus:overflow",this.triggerNextCategory),this.grid.on("focus:underflow",this.triggerPreviousCategory),this.uiEvents=[es.uiEvent("click",this.selectEmoji),es.uiEvent("keydown",this.grid.handleKeyDown)],this.preview&&this.uiEvents.push(es.uiEvent("mouseover",this.showPreview),es.uiEvent("mouseout",this.hidePreview),es.uiEvent("focus",this.showPreview,{capture:!0}),es.uiEvent("blur",this.hidePreview,{capture:!0})),super.initialize()}setFocusedView(e,t){if(e){if("string"==typeof e){let t=this.emojis.findIndex(t=>t.emoji===e);this.grid.setFocusedIndex(t,!1),setTimeout(()=>{var e,i,o,r;let s=this.emojiViews[t].el;s.scrollIntoView();let n=null==(e=s.parentElement)?void 0:e.previousElementSibling,a=null==(o=null==(i=s.parentElement)?void 0:i.parentElement)?void 0:o.parentElement;a.scrollTop-=null!=(r=null==n?void 0:n.offsetHeight)?r:0})}else"first"===e.row||0===e.row?this.grid.setCell(0,e.offset,t):"last"===e.row&&this.grid.setCell(this.grid.getRowCount()-1,e.offset,t)}}setActive(e,t,i){var o;e?this.setFocusedView(t,i):null==(o=this.emojiViews[this.grid.getIndex()])||o.deactivateFocus()}renderSync(){return this.emojiViews=this.emojis.map(e=>this.viewFactory.create(eR,{emoji:e,category:this.category,lazyLoader:this.lazyLoader,renderer:this.renderer})),this.emojiElements=this.emojiViews.map(e=>e.renderSync()),super.renderSync({emojis:this.emojiElements,i18n:this.i18n})}destroy(){super.destroy(),this.emojiViews.forEach(e=>e.destroy()),this.grid.destroy()}triggerPreviousCategory(e){this.events.emit("category:previous",e)}triggerNextCategory(e){this.category&&this.events.emit("category:next",e)}setFocus({from:e,to:t,performFocus:i}){var o,r;null==(o=this.emojiViews[e])||o.deactivateFocus(),null==(r=this.emojiViews[t])||r.activateFocus(i)}selectEmoji(e){e.stopPropagation();let t=A(e,this.emojis);t&&this.events.emit("emoji:select",{emoji:t,showVariants:this.showVariants})}showPreview(e){let t=e.target.closest("button"),i=null==t?void 0:t.firstElementChild,o=A(e,this.emojis);o&&this.events.emit("preview:show",o,null==i?void 0:i.cloneNode(!0))}hidePreview(e){A(e,this.emojis)&&this.events.emit("preview:hide")}get emojiCount(){return this.emojis.length}}const eH=new ed(({classes:e,category:t,pickerId:i,icon:o,i18n:r})=>`
  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${i}-category-${t.key}">
    <h3 data-category="${t.key}" class="${e.categoryName}">
      <i data-icon="${o}"></i>
      ${r.get(`categories.${t.key}`,t.message||t.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);class eU extends ez{constructor({category:e,showVariants:t,lazyLoader:i,emojiVersion:o}){super({category:e,showVariants:t,lazyLoader:i,template:eH}),this.showVariants=t,this.lazyLoader=i,this.emojiVersion=o}initialize(){this.uiElements={...this.baseUIElements},super.initialize()}async render(){await this.emojiDataPromise;let e=await this.emojiData.getEmojis(this.category,this.emojiVersion);return this.emojiContainer=this.viewFactory.create(eB,{emojis:e,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),super.render({category:this.category,emojis:this.emojiContainer,emojiCount:e.length,icon:el[this.category.key]})}}class eV extends eB{constructor({category:e,emojis:t,preview:i=!0,lazyLoader:o}){super({category:e,emojis:t,showVariants:!1,preview:i,lazyLoader:o})}async addOrUpdate(e){let t=this.el.querySelector(`[data-emoji="${e.emoji}"]`);t&&(this.el.removeChild(t),this.emojis=this.emojis.filter(t=>t!==e));let i=this.viewFactory.create(eR,{emoji:e});if(this.el.insertBefore(i.renderSync(),this.el.firstChild),this.emojis=[e,...this.emojis.filter(t=>t!==e)],this.emojis.length>this.options.maxRecents){this.emojis=this.emojis.slice(0,this.options.maxRecents);let e=this.el.childElementCount-this.options.maxRecents;for(let t=0;t<e;t++)this.el.lastElementChild&&this.el.removeChild(this.el.lastElementChild)}}}const eq=new ed(({emojiCount:e,classes:t,category:i,pickerId:o,icon:r,i18n:s})=>`
  <section class="${t.emojiCategory}" role="tabpanel" aria-labelledby="${o}-category-${i.key}">
    <h3 data-category="${i.key}" class="${t.categoryName}">
      <i data-icon="${r}"></i>
      ${s.get(`categories.${i.key}`,i.message||i.key)}
    </h3>
    <div data-empty="${0===e}" class="${t.recentEmojis}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
    <div class="${t.noRecents}">
      ${s.get("recents.none")}
    </div>
  </section>
`,{mode:"async"}),eW=new ed(({classes:e,category:t,pickerId:i,icon:o,i18n:r})=>`
  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${i}-category-${t.key}">
    <h3 data-category="${t.key}" class="${e.categoryName}">
      <i data-icon="${o}"></i>
      ${r.get(`categories.${t.key}`,t.message||t.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);class eK{constructor(){this.elements=/* @__PURE__ */new Map}lazyLoad(e,t){return this.elements.set(e,t),e}observe(e){if(window.IntersectionObserver){let t=new IntersectionObserver(e=>{e.filter(e=>e.intersectionRatio>0).map(e=>e.target).forEach(e=>{let i=this.elements.get(e);null==i||i(),t.unobserve(e)})},{root:e});this.elements.forEach((e,i)=>{t.observe(i)})}else this.elements.forEach(e=>{e()})}}const eG=I("emojiArea"),eJ=new ed(({classes:e})=>`
  <div class="${e.emojiArea}">
    <div data-placeholder="emojis"></div>
  </div>
`,{mode:"async"}),eZ={recents:class extends ez{constructor({category:e,lazyLoader:t,provider:i}){super({category:e,showVariants:!1,lazyLoader:t,template:eq}),this.provider=i}initialize(){this.uiElements={...this.baseUIElements,recents:es.byClass(eO.recentEmojis)},this.appEvents={"recent:add":this.addRecent},super.initialize()}async addRecent(e){await this.emojiContainer.addOrUpdate(e),this.ui.recents.dataset.empty="false"}async render(){var e;let t=null==(e=this.provider)?void 0:e.getRecents(this.options.maxRecents);return this.emojiContainer=this.viewFactory.create(eV,{emojis:t,showVariants:!1,lazyLoader:this.lazyLoader,category:this.category.key}),await super.render({category:this.category,emojis:this.emojiContainer,emojiCount:t.length,icon:el[this.category.key]}),this.el}},custom:class extends ez{constructor({category:e,lazyLoader:t}){super({template:eW,showVariants:!1,lazyLoader:t,category:e})}initialize(){this.uiElements={...this.baseUIElements},super.initialize()}async render(){return this.emojiContainer=this.viewFactory.create(eB,{emojis:this.customEmojis,showVariants:this.showVariants,lazyLoader:this.lazyLoader,category:this.category.key}),super.render({category:this.category,emojis:this.emojiContainer,emojiCount:this.customEmojis.length,icon:el[this.category.key]})}}};class eY extends es{constructor({categoryTabs:e,categories:t,emojiVersion:i}){var o;let r;super({template:eJ,classes:eG}),this.selectedCategory=0,this.scrollListenerState="active",this.lazyLoader=new eK,this.categoryTabs=e,this.categories=t,this.emojiVersion=i,this.handleScroll=(o=this.handleScroll.bind(this),r=null,()=>{r||(r=window.setTimeout(()=>{o(),r=null},100))})}initialize(){this.appEvents={"category:select":this.handleCategorySelect,"category:previous":this.focusPreviousCategory,"category:next":this.focusNextCategory,"focus:change":this.updateFocusedCategory},this.uiElements={emojis:es.byClass(eG.emojiArea)},this.uiEvents=[es.uiEvent("scroll",this.handleScroll)],super.initialize()}get focusableEmoji(){return this.el.querySelector('[tabindex="0"]')}async render(){this.emojiCategories=this.categories.map(this.createCategory,this);let e={};return this.categories.forEach((t,i)=>{e[`emojis-${t.key}`]=this.emojiCategories[i]}),await super.render({emojis:await Promise.all(this.emojiCategories.map(e=>e.render()))}),this.lazyLoader.observe(this.el),this.el}destroy(){super.destroy(),this.emojiCategories.forEach(e=>{var t;null==(t=this.observer)||t.unobserve(e.el),e.destroy()})}handleCategorySelect(e,t){this.el.style.overflow="hidden",this.selectCategory(e,t),this.el.style.overflow="auto"}createCategory(e){let t=eZ[e.key]||eU;return this.viewFactory.create(t,{category:e,showVariants:!0,lazyLoader:this.lazyLoader,emojiVersion:this.emojiVersion,provider:this.options.recentsProvider})}determineInitialCategory(){var e;return this.options.initialCategory&&this.categories.find(e=>e.key===this.options.initialCategory)?this.options.initialCategory:null==(e=this.categories.find(e=>"recents"!==e.key))?void 0:e.key}determineFocusTarget(e){let t=this.emojiCategories.find(t=>t.category.key===e);return this.options.initialEmoji&&(null==t?void 0:t.el.querySelector(`[data-emoji="${this.options.initialEmoji}"]`))?this.options.initialEmoji:"button"}reset(e=!0){this.events.emit("preview:hide");let t=this.determineInitialCategory();t&&(this.selectCategory(t,{focus:this.determineFocusTarget(t),performFocus:e,scroll:"jump"}),this.selectedCategory=this.getCategoryIndex(t))}getCategoryIndex(e){return this.categories.findIndex(t=>t.key===e)}focusPreviousCategory(e){this.selectedCategory>0&&this.focusCategory(this.selectedCategory-1,{row:"last",offset:null!=e?e:this.options.emojisPerRow})}focusNextCategory(e){this.selectedCategory<this.categories.length-1&&this.focusCategory(this.selectedCategory+1,{row:"first",offset:null!=e?e:0})}focusCategory(e,t){this.selectCategory(e,{focus:t,performFocus:!0})}async selectCategory(e,t={}){var i;this.scrollListenerState="suspend";let{focus:o,performFocus:r,scroll:s}={performFocus:!1,...t};this.emojiCategories[this.selectedCategory].setActive(!1);let n=this.selectedCategory="number"==typeof e?e:this.getCategoryIndex(e);null==(i=this.categoryTabs)||i.setActiveTab(this.selectedCategory,{performFocus:r,scroll:"button"===o});let a=this.emojiCategories[n].el.offsetTop;this.emojiCategories[n].setActive(!0,o&&"button"!==o?o:{row:"first",offset:0},"button"!==o&&r),s&&(this.el.scrollTop=a),this.scrollListenerState="resume"}updateFocusedCategory(e){var t;this.categories[this.selectedCategory].key!==e&&(this.scrollListenerState="suspend",this.selectedCategory=this.getCategoryIndex(e),null==(t=this.categoryTabs)||t.setActiveTab(this.selectedCategory,{changeFocusable:!1,performFocus:!1}),this.scrollListenerState="resume")}handleScroll(){if("suspend"===this.scrollListenerState||!this.categoryTabs)return;if("resume"===this.scrollListenerState){this.scrollListenerState="active";return}let e=this.el.scrollTop,t=this.el.scrollHeight-this.el.offsetHeight,i=this.emojiCategories.findIndex((t,i)=>{var o;return e<(null==(o=this.emojiCategories[i+1])?void 0:o.el.offsetTop)}),o={changeFocusable:!1,performFocus:!1,scroll:!1};0===e?this.categoryTabs.setActiveTab(0,o):Math.floor(e)===Math.floor(t)||i<0?this.categoryTabs.setActiveTab(this.categories.length-1,o):this.categoryTabs.setActiveTab(i,o)}}const eX=new ed(({classList:e,classes:t,icon:i,message:o})=>`
<div class="${e}" role="alert">
  <div class="${t.iconContainer}"><i data-size="10x" data-icon="${i}"></i></div>
  <h3 class="${t.title}">${o}</h3>
</div>
`),eQ=I("error","iconContainer","title");class e1 extends es{constructor({message:e,icon:t="warning",template:i=eX,className:o}){super({template:i,classes:eQ}),this.message=e,this.icon=t,this.className=o}renderSync(){let e=[eQ.error,this.className].join(" ").trim();return super.renderSync({message:this.message,icon:this.icon,classList:e})}}const e0=new ed(({classList:e,classes:t,icon:i,i18n:o,message:r})=>`
  <div class="${e}" role="alert">
    <div class="${t.icon}"><i data-size="10x" data-icon="${i}"></i></div>
    <h3 class="${t.title}">${r}</h3>
    <button type="button">${o.get("retry")}</button>
  </div>
`),e2=I("dataError");class e3 extends e1{constructor({message:e}){super({message:e,template:e0,className:e2.dataError})}initialize(){this.uiElements={retryButton:"button"},this.uiEvents=[es.childEvent("retryButton","click",this.onRetry)],super.initialize()}async onRetry(){this.emojiData?await this.emojiData.delete():await this.options.dataStore.deleteDatabase(this.options.locale),this.events.emit("reinitialize");let e=await ee(this.options.locale,this.options.dataStore,this.options.messages,this.options.emojiData,this.emojiData);this.viewFactory.setEmojiData(e),this.events.emit("data:ready",e)}}const e5=I("preview","previewEmoji","previewName","tagList","tag"),e4=new ed(({classes:e,tag:t})=>`
  <li class="${e.tag}">${t}</li>
`),e6=new ed(({classes:e})=>`
  <div class="${e.preview}">
    <div class="${e.previewEmoji}"></div>
    <div class="${e.previewName}"></div>
    <ul class="${e.tagList}"></ul>
  </div>
`);class e9 extends es{constructor(){super({template:e6,classes:e5})}initialize(){this.uiElements={emoji:es.byClass(e5.previewEmoji),name:es.byClass(e5.previewName),tagList:es.byClass(e5.tagList)},this.appEvents={"preview:show":this.showPreview,"preview:hide":this.hidePreview},super.initialize()}showPreview(e,t){if($(this.ui.emoji,t),this.ui.name.textContent=e.label,e.tags){this.ui.tagList.style.display="flex";let t=e.tags.map(e=>e4.renderSync({tag:e,classes:e5}));$(this.ui.tagList,...t)}}hidePreview(){R(this.ui.emoji),R(this.ui.name),R(this.ui.tagList)}}const e8=new ed(({classes:e,i18n:t})=>`
  <button title="${t.get("search.clear")}" class="${e.clearSearchButton}">
    <i data-icon="xmark"></i>
  </button>
`),e7=new ed(({classes:e,i18n:t})=>`
<div class="${e.searchContainer}">
  <input class="${e.searchField}" placeholder="${t.get("search")}">
  <span class="${e.searchAccessory}"></span>
</div>
`,{mode:"async"}),te=I("searchContainer","searchField","clearButton","searchAccessory","clearSearchButton","notFound");class tt extends es{constructor({categories:e,emojiVersion:t}){var i;let o;super({template:e7,classes:te}),this.categories=e.filter(e=>"recents"!==e.key),this.emojiVersion=t,this.search=(i=this.search.bind(this),o=null,(...e)=>{o&&window.clearTimeout(o),o=window.setTimeout(()=>{i(...e),o=null},100)})}initialize(){this.uiElements={searchField:es.byClass(te.searchField),searchAccessory:es.byClass(te.searchAccessory)},this.uiEvents=[es.childEvent("searchField","keydown",this.onKeyDown),es.childEvent("searchField","input",this.onSearchInput)],super.initialize()}async render(){return await super.render(),this.searchIcon=eh("search"),this.notFoundMessage=this.viewFactory.create(e1,{message:this.i18n.get("search.notFound"),className:te.notFound,icon:"sad"}),this.notFoundMessage.renderSync(),this.errorMessage=this.viewFactory.create(e1,{message:this.i18n.get("search.error")}),this.errorMessage.renderSync(),this.clearSearchButton=e8.render({classes:te,i18n:this.i18n}),this.clearSearchButton.addEventListener("click",e=>this.onClearSearch(e)),this.searchField=this.ui.searchField,this.showSearchIcon(),this.el}showSearchIcon(){this.showSearchAccessory(this.searchIcon)}showClearSearchButton(){this.showSearchAccessory(this.clearSearchButton)}showSearchAccessory(e){$(this.ui.searchAccessory,e)}clear(){this.searchField.value="",this.showSearchIcon()}focus(){this.searchField.focus()}onClearSearch(e){var t;e.stopPropagation(),this.searchField.value="",null==(t=this.resultsContainer)||t.destroy(),this.resultsContainer=null,this.showSearchIcon(),this.events.emit("content:show"),this.searchField.focus()}handleResultsKeydown(e){this.resultsContainer&&"Escape"===e.key&&this.onClearSearch(e)}onKeyDown(e){var t;"Escape"===e.key&&this.searchField.value?this.onClearSearch(e):("Enter"===e.key||"ArrowDown"===e.key)&&this.resultsContainer&&(e.preventDefault(),null==(t=this.resultsContainer.el.querySelector('[tabindex="0"]'))||t.focus())}onSearchInput(e){this.searchField.value?(this.showClearSearchButton(),this.search()):this.onClearSearch(e)}async search(){var e;if(this.searchField.value)try{let t=await this.emojiData.searchEmojis(this.searchField.value,this.customEmojis,this.emojiVersion,this.categories);if(this.events.emit("preview:hide"),t.length){let i=new eK;this.resultsContainer=this.viewFactory.create(eB,{emojis:t,fullHeight:!0,showVariants:!0,lazyLoader:i}),this.resultsContainer.renderSync(),null!=(e=this.resultsContainer)&&e.el&&(i.observe(this.resultsContainer.el),this.resultsContainer.setActive(!0,{row:0,offset:0},!1),this.resultsContainer.el.addEventListener("keydown",e=>this.handleResultsKeydown(e)),this.events.emit("content:show",this.resultsContainer))}else this.events.emit("content:show",this.notFoundMessage)}catch{this.events.emit("content:show",this.errorMessage)}}}const ti=new ed(({classes:e})=>`
  <div class="${e.variantOverlay}">
    <div class="${e.variantPopup}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
  </div>
`),to=I("variantOverlay","variantPopup"),tr={easing:"ease-in-out",duration:250,fill:"both"},ts={opacity:[0,1]},tn={opacity:[0,1],transform:["scale3d(0.8, 0.8, 0.8)","scale3d(1, 1, 1)"]};class ta extends es{constructor({emoji:e,parent:t}){super({template:ti,classes:to,parent:t}),this.focusedEmojiIndex=0,this.focusTrap=new et,this.animateShow=()=>Promise.all([P(this.el,ts,tr,this.options),P(this.ui.popup,tn,tr,this.options)]),this.emoji=e}initialize(){this.uiElements={popup:es.byClass(to.variantPopup)},this.uiEvents=[es.uiEvent("click",this.handleClick),es.uiEvent("keydown",this.handleKeydown)],super.initialize()}animateHide(){let e={...tr,direction:"reverse"};return Promise.all([P(this.el,ts,e,this.options),P(this.ui.popup,tn,e,this.options)])}async hide(){await this.animateHide(),this.events.emit("variantPopup:hide")}handleKeydown(e){"Escape"===e.key&&(this.hide(),e.stopPropagation())}handleClick(e){this.ui.popup.contains(e.target)||this.hide()}getEmoji(e){return this.renderedEmojis[e]}setFocusedEmoji(e){let t=this.getEmoji(this.focusedEmojiIndex);t.tabIndex=-1,this.focusedEmojiIndex=e;let i=this.getEmoji(this.focusedEmojiIndex);i.tabIndex=0,i.focus()}destroy(){this.emojiContainer.destroy(),this.focusTrap.deactivate(),super.destroy()}renderSync(){let e={...this.emoji,skins:null},t=(this.emoji.skins||[]).map(e=>({...e,label:this.emoji.label,tags:this.emoji.tags})),i=[e,...t];return this.emojiContainer=this.viewFactory.create(eB,{emojis:i,preview:!1}),super.renderSync({emojis:this.emojiContainer}),i.length<this.options.emojisPerRow&&this.el.style.setProperty("--emojis-per-row",i.length.toString()),this.el}activate(){this.emojiContainer.setActive(!0,{row:0,offset:0},!0),this.focusTrap.activate(this.el)}}const tc=new ed(({classes:e,i18n:t,category:i,pickerId:o,icon:r})=>`
<li class="${e.categoryTab}">
  <button
    aria-selected="false"
    role="tab"
    class="${e.categoryButton}"
    tabindex="-1"
    title="${t.get(`categories.${i.key}`,i.message||i.key)}"
    type="button"
    data-category="${i.key}"
    id="${o}-category-${i.key}"
  >
    <i data-icon="${r}"></i>
</li>
`),tl=I("categoryTab","categoryTabActive","categoryButton");class th extends es{constructor({category:e,icon:t}){super({template:tc,classes:tl}),this.isActive=!1,this.category=e,this.icon=t}initialize(){this.uiElements={button:es.byClass(tl.categoryButton)},this.uiEvents=[es.childEvent("button","click",this.selectCategory),es.childEvent("button","focus",this.selectCategory)],super.initialize()}renderSync(){return super.renderSync({category:this.category,icon:this.icon}),this.ui.button.ariaSelected="false",this.el}setActive(e,t={}){let{changeFocusable:i,performFocus:o,scroll:r}={changeFocusable:!0,performFocus:!0,scroll:!0,...t};this.el.classList.toggle(tl.categoryTabActive,e),i&&(this.ui.button.tabIndex=e?0:-1,this.ui.button.ariaSelected=e.toString()),e&&o&&(this.ui.button.focus(),r&&this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!1})),this.isActive=e}selectCategory(){this.isActive||this.events.emit("category:select",this.category.key,{scroll:"animate",focus:"button",performFocus:!0})}}const tu=new ed(({classes:e})=>`
  <div class="${e.categoryButtonsContainer}">
    <ul role="tablist" class="${e.categoryButtons}">
      <div data-placeholder="tabs"></div>
    </ul>
  </div>
`),td=I("categoryButtons","categoryButtonsContainer");class tp extends es{constructor({categories:e}){super({template:tu,classes:td}),this.activeCategoryIndex=0,this.categories=e}initialize(){this.keyBindings={ArrowLeft:this.stepSelectedTab(-1),ArrowRight:this.stepSelectedTab(1)},this.uiEvents=[es.uiEvent("scroll",this.checkOverflow)],super.initialize()}checkOverflow(){let e=Math.abs(this.el.scrollLeft-(this.el.scrollWidth-this.el.offsetWidth))>1,t=this.el.scrollLeft>0;this.el.className="categoryButtonsContainer",t&&e?this.el.classList.add("has-overflow-both"):t?this.el.classList.add("has-overflow-left"):e&&this.el.classList.add("has-overflow-right")}renderSync(){return this.tabViews=this.categories.map(e=>this.viewFactory.create(th,{category:e,icon:el[e.key]})),super.renderSync({tabs:this.tabViews.map(e=>e.renderSync())}),this.el}get currentCategory(){return this.categories[this.activeCategoryIndex]}get currentTabView(){return this.tabViews[this.activeCategoryIndex]}setActiveTab(e,t={}){this.checkOverflow();let i=this.currentTabView,o=this.tabViews[e];i.setActive(!1,t),o.setActive(!0,t),this.activeCategoryIndex=e}getTargetCategory(e){return e<0?this.categories.length-1:e>=this.categories.length?0:e}stepSelectedTab(e){return()=>{let t=this.activeCategoryIndex+e;this.setActiveTab(this.getTargetCategory(t),{changeFocusable:!0,performFocus:!0})}}}const tm=[{version:15,emoji:String.fromCodePoint(129768)},{version:14,emoji:String.fromCodePoint(128733)},{version:13,emoji:String.fromCodePoint(129729)},{version:12,emoji:String.fromCodePoint(129449)},{version:11,emoji:String.fromCodePoint(129463)},{version:5,emoji:String.fromCodePoint(129322)},{version:4,emoji:String.fromCodePoint(9877)},{version:3,emoji:String.fromCodePoint(129314)},{version:2,emoji:String.fromCodePoint(128488)},{version:1,emoji:String.fromCodePoint(128512)}];function tg(e,t){return Array.from({length:e},()=>t).join("")}const tf=new ed(e=>e.isLoaded?function(e){let{classes:t,theme:i,className:o=""}=e;return`
    <div class="picmo__picker ${t.picker} ${i} ${o}">
      ${function({showHeader:e,classes:t}){return e?`
    <header class="${t.header}">
      <div data-view="search"></div>
      <div data-view="categoryTabs" data-render="sync"></div>
    </header>
  `:""}(e)}
      <div class="${t.content}">
        <div data-view="emojiArea"></div>
      </div>
      <div data-view="preview"></div>
    </div>
  `}(e):function(e){let{emojiCount:t,classes:i,theme:o,className:r,categoryCount:s}=e,n=({showSearch:e,classes:t})=>e?`
    <div class="${t.searchSkeleton}">
      <div class="${t.searchInput} ${t.placeholder}"></div>
    </div>
  `:"",a=({showCategoryTabs:e,classes:t})=>e?`
    <div class="${t.categoryTabsSkeleton}">
      ${tg(s,`<div class="${t.placeholder} ${t.categoryTab}"></div>`)}
    </div>
  `:"";return`
    <div class="picmo__picker ${i.skeleton} ${i.picker} ${o} ${r}">
      ${(({showHeader:t,classes:i})=>t?`
    <header class="${i.headerSkeleton}">
      ${n(e)}
      ${a(e)}
    </header>
  `:"")(e)}
      <div class="${i.contentSkeleton}">
        <div class="${i.placeholder} ${i.categoryName}"></div>
        <div class="${i.emojiGrid}">
          ${tg(t,`<div class="${i.placeholder} ${i.emoji}"></div>`)}
        </div>
      </div>
      ${(({showPreview:e,classes:t})=>e?`
    <div class="${t.previewSkeleton}">
      <div class="${t.placeholder} ${t.previewEmoji}"></div>
      <div class="${t.placeholder} ${t.previewName}"></div>
      <ul class="${t.tagList}">
        ${tg(3,`<li class="${t.placeholder} ${t.tag}"></li>`)}
      </ul>
    </div>
  `:"")(e)}
    </div>
  `}(e)),ty=I("picker","skeleton","placeholder","searchSkeleton","searchInput","categoryTabsSkeleton","headerSkeleton","categoryTab","contentSkeleton","categoryName","emojiGrid","emoji","previewSkeleton","previewEmoji","previewName","tagList","tag","overlay","content","fullHeight","pluginContainer","header"),tv={emojisPerRow:"--emojis-per-row",visibleRows:"--row-count",emojiSize:"--emoji-size"};class tw extends es{constructor(){super({template:tf,classes:ty}),this.pickerReady=!1,this.externalEvents=new eP,this.updaters={styleProperty:e=>t=>this.el.style.setProperty(tv[e],t.toString()),theme:e=>{let t=this.options.theme,i=this.el.closest(`.${t}`);this.el.classList.remove(t),null==i||i.classList.remove(t),this.el.classList.add(e),null==i||i.classList.add(e)},className:e=>{this.options.className&&this.el.classList.remove(this.options.className),this.el.classList.add(e)},emojisPerRow:this.updateStyleProperty.bind(this,"emojisPerRow"),emojiSize:this.updateStyleProperty.bind(this,"emojiSize"),visibleRows:this.updateStyleProperty.bind(this,"visibleRows")}}initialize(){this.uiElements={pickerContent:es.byClass(ty.content),header:es.byClass(ty.header)},this.uiEvents=[es.uiEvent("keydown",this.handleKeyDown)],this.appEvents={error:this.onError,reinitialize:this.reinitialize,"data:ready":this.onDataReady,"content:show":this.showContent,"variantPopup:hide":this.hideVariantPopup,"emoji:select":this.selectEmoji},super.initialize(),this.options.recentsProvider}destroy(){var e,t;super.destroy(),null==(e=this.search)||e.destroy(),this.emojiArea.destroy(),null==(t=this.categoryTabs)||t.destroy(),this.events.removeAll(),this.externalEvents.removeAll()}clearRecents(){this.options.recentsProvider.clear()}addEventListener(e,t){this.externalEvents.on(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t)}initializePickerView(){this.pickerReady&&(this.showContent(),this.emojiArea.reset(!1))}handleKeyDown(e){let t=e.ctrlKey||e.metaKey;"s"===e.key&&t&&this.search&&(e.preventDefault(),this.search.focus())}buildChildViews(){return this.options.showPreview&&(this.preview=this.viewFactory.create(e9)),this.options.showSearch&&(this.search=this.viewFactory.create(tt,{categories:this.categories,emojiVersion:this.emojiVersion})),this.options.showCategoryTabs&&(this.categoryTabs=this.viewFactory.create(tp,{categories:this.categories})),this.currentView=this.emojiArea=this.viewFactory.create(eY,{categoryTabs:this.categoryTabs,categories:this.categories,emojiVersion:this.emojiVersion}),[this.preview,this.search,this.emojiArea,this.categoryTabs]}setStyleProperties(){this.options.showSearch||this.el.style.setProperty("--search-height-full","0px"),this.options.showCategoryTabs||(this.el.style.setProperty("--category-tabs-height","0px"),this.el.style.setProperty("--category-tabs-offset","0px")),this.options.showPreview||this.el.style.setProperty("--emoji-preview-height-full","0px"),Object.keys(tv).forEach(e=>{this.options[e]&&this.el.style.setProperty(tv[e],this.options[e].toString())})}updateStyleProperty(e,t){this.el.style.setProperty(tv[e],t.toString())}reinitialize(){this.renderSync()}onError(e){let t=this.viewFactory.createWithOptions({data:!1},e3,{message:this.i18n.get("error.load")}),i=this.el.offsetHeight||375;throw this.el.style.height=`${i}px`,$(this.el,t.renderSync()),e}async onDataReady(e){let t=this.el;try{e?this.emojiData=e:await this.emojiDataPromise,"auto"===this.options.emojiVersion?this.emojiVersion=function(){var e;let t=tm.find(e=>(function(e){let t=document.createElement("canvas").getContext("2d");if(t)return t.textBaseline="top",t.font="32px Arial",t.fillText(e,0,0),0!==t.getImageData(16,16,1,1).data[0]})(e.emoji));return null!=(e=null==t?void 0:t.version)?e:1}()||parseFloat("14.0"):this.emojiVersion=this.options.emojiVersion,this.categories=await this.emojiData.getCategories(this.options);let[i,o,r,s]=this.buildChildViews();await super.render({isLoaded:!0,search:o,categoryTabs:s,emojiArea:r,preview:i,showHeader:!!(this.search||this.categoryTabs),theme:this.options.theme,className:this.options.className}),this.el.style.setProperty("--category-count",this.categories.length.toString()),this.pickerReady=!0,t.replaceWith(this.el),this.setStyleProperties(),this.initializePickerView(),this.setInitialFocus(),this.externalEvents.emit("data:ready")}catch(e){this.events.emit("error",e)}}renderSync(){var e;let t=(null==(e=this.options.categories)?void 0:e.length)||10;if(this.options.showRecents&&(t+=1),super.renderSync({isLoaded:!1,theme:this.options.theme,className:this.options.className,showSearch:this.options.showSearch,showPreview:this.options.showPreview,showCategoryTabs:this.options.showCategoryTabs,showHeader:this.options.showSearch||this.options.showCategoryTabs,emojiCount:this.options.emojisPerRow*this.options.visibleRows,categoryCount:t}),this.el.style.setProperty("--category-count",t.toString()),!this.options.rootElement)throw Error("Picker must be given a root element via the rootElement option");return $(this.options.rootElement,this.el),this.setStyleProperties(),this.pickerReady&&this.initializePickerView(),this.el}getInitialFocusTarget(){if("u">typeof this.options.autoFocus)switch(this.options.autoFocus){case"emojis":return this.emojiArea.focusableEmoji;case"search":return this.search;case"auto":return this.search||this.emojiArea.focusableEmoji;default:return null}if(!0===this.options.autoFocusSearch)return console.warn("options.autoFocusSearch is deprecated, please use options.focusTarget instead"),this.search}setInitialFocus(){var e;this.pickerReady&&null!=(e=this.getInitialFocusTarget())&&e.focus()}reset(e=!0){var t;this.pickerReady&&(this.emojiArea.reset(e),this.showContent(this.emojiArea)),null==(t=this.search)||t.clear(),this.hideVariantPopup()}showContent(e=this.emojiArea){var t,i;e!==this.currentView&&(this.currentView!==this.emojiArea&&(null==(t=this.currentView)||t.destroy()),this.ui.pickerContent.classList.toggle(ty.fullHeight,e!==this.emojiArea),$(this.ui.pickerContent,e.el),this.currentView=e,e===this.emojiArea?(this.emojiArea.reset(),this.categoryTabs&&this.ui.header.appendChild(this.categoryTabs.el)):null==(i=this.categoryTabs)||i.el.remove())}hideVariantPopup(){var e;null==(e=this.variantPopup)||e.destroy()}isPickerClick(e){var t,i;let o=e.target,r=this.el.contains(o),s=null==(i=null==(t=this.variantPopup)?void 0:t.el)?void 0:i.contains(o);return r||s}async selectEmoji({emoji:e}){var t,i;(null==(t=e.skins)?void 0:t.length)&&this.options.showVariants&&!this.isVariantPopupOpen?this.showVariantPopup(e):(await (null==(i=this.variantPopup)?void 0:i.animateHide()),this.events.emit("variantPopup:hide"),await this.emitEmoji(e))}get isVariantPopupOpen(){return this.variantPopup&&!this.variantPopup.isDestroyed}async showVariantPopup(e){let t=document.activeElement;this.events.once("variantPopup:hide",()=>{null==t||t.focus()}),this.variantPopup=this.viewFactory.create(ta,{emoji:e,parent:this.el}),this.el.appendChild(this.variantPopup.renderSync()),this.variantPopup.activate()}async emitEmoji(e){this.externalEvents.emit("emoji:select",await this.renderer.doEmit(e)),this.options.recentsProvider.addOrUpdateRecent(e,this.options.maxRecents),this.events.emit("recent:add",e)}updateOptions(e){Object.keys(e).forEach(t=>{this.updaters[t](e[t])}),Object.assign(this.options,e)}}class tb{constructor({events:e,i18n:t,renderer:i,emojiData:o,options:r,customEmojis:s=[],pickerId:n}){this.events=e,this.i18n=t,this.renderer=i,this.emojiData=o,this.options=r,this.customEmojis=s,this.pickerId=n}setEmojiData(e){this.emojiData=Promise.resolve(e)}createWithOptions(e={},t,...i){let o=new t(...i);return o.setPickerId(this.pickerId),o.setEvents(this.events),o.setI18n(this.i18n),o.setRenderer(this.renderer),!1!==e.data&&o.setEmojiData(this.emojiData),o.setOptions(this.options),o.setCustomEmojis(this.customEmojis),o.viewFactory=this,o.initialize(),o}create(e,...t){return this.createWithOptions({},e,...t)}}class t_{constructor(e={}){b(this,p,void 0),_(this,p,new Map(Object.entries(e)))}get(e,t=e){return w(this,p).get(e)||t}}function tC(){let e=!1;return function(t){eF.injectStyles&&!e&&(function(e,t){void 0===t&&(t={});var i=t.insertAt;if(!(!e||typeof document>"u")){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(t),e=!0)}}p=new WeakMap;const tx=`.picmo__picker .picmo__icon{width:1.25em;height:1em;fill:currentColor}.picmo__icon-small{font-size:.8em}.picmo__icon-medium{font-size:1em}.picmo__icon-large{font-size:1.25em}.picmo__icon-2x{font-size:2em}.picmo__icon-3x{font-size:3em}.picmo__icon-4x{font-size:4em}.picmo__icon-5x{font-size:5em}.picmo__icon-8x{font-size:8em}.picmo__icon-10x{font-size:10em}.picmo__light,.picmo__auto{color-scheme:light;--accent-color: #4f46e5;--background-color: #f9fafb;--border-color: #cccccc;--category-name-background-color: #f9fafb;--category-name-button-color: #999999;--category-name-text-color: hsl(214, 30%, 50%);--category-tab-active-background-color: rgba(255, 255, 255, .6);--category-tab-active-color: var(--accent-color);--category-tab-color: #666;--category-tab-highlight-background-color: rgba(0, 0, 0, .15);--error-color-dark: hsl(0, 100%, 45%);--error-color: hsl(0, 100%, 40%);--focus-indicator-background-color: hsl(198, 65%, 85%);--focus-indicator-color: #333333;--hover-background-color: #c7d2fe;--placeholder-background-color: #cccccc;--search-background-color: #f9fafb;--search-focus-background-color: #ffffff;--search-icon-color: #999999;--search-placeholder-color: #71717a;--secondary-background-color: #e2e8f0;--secondary-text-color: #666666;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #000000;--variant-popup-background-color: #ffffff}.picmo__dark{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}@media (prefers-color-scheme: dark){.picmo__auto{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}}.picmo__picker .picmo__categoryButtonsContainer{overflow:auto;padding:2px 0}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-right{mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-left{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-both{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%)}.picmo__picker .picmo__categoryButtons{display:flex;flex-direction:row;gap:var(--tab-gap);margin:0;padding:0 .5em;align-items:center;height:var(--category-tabs-height);box-sizing:border-box;width:100%;justify-content:space-between;position:relative;list-style-type:none;justify-self:center;max-width:min(23.55rem,calc(var(--category-count, 1) * 2.5rem))}.picmo__picker .picmo__categoryButtons .picmo__categoryTab{display:flex;align-items:center;transition:all .1s;width:2em}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton{color:var(--category-tab-active-color);background:linear-gradient(rgba(255,255,255,.75) 0%,rgba(255,255,255,.75) 100%),linear-gradient(var(--category-tab-active-color) 0%,var(--category-tab-active-color) 100%);border:2px solid var(--category-tab-active-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton:hover{background-color:var(--category-tab-active-background-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton{border-radius:5px;background:transparent;border:2px solid transparent;color:var(--category-tab-color);cursor:pointer;padding:2px;vertical-align:middle;display:flex;align-items:center;justify-content:center;font-size:1.2rem;width:1.6em;height:1.6em;transition:all .1s}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:is(img){width:var(--category-tab-size);height:var(--category-tab-size)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:hover{background:var(--category-tab-highlight-background-color)}.picmo__dataError [data-icon]{opacity:.8}@keyframes appear{0%{opacity:0}to{opacity:.8}}@keyframes appear-grow{0%{opacity:0;transform:scale(.8)}to{opacity:.8;transform:scale(1)}}.picmo__picker .picmo__error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--secondary-text-color)}.picmo__picker .picmo__error .picmo__iconContainer{opacity:.8;animation:appear-grow .25s cubic-bezier(.175,.885,.32,1.275);--color-primary: var(--error-color);--color-secondary: var(--error-color-dark)}.picmo__picker .picmo__error .picmo__title{animation:appear .25s;animation-delay:50ms;animation-fill-mode:both}.picmo__picker .picmo__error button{padding:8px 16px;cursor:pointer;background:var(--background-color);border:1px solid var(--text-color);border-radius:5px;color:var(--text-color)}.picmo__picker .picmo__error button:hover{background:var(--text-color);color:var(--background-color)}.picmo__emojiButton{background:transparent;border:none;border-radius:15px;cursor:pointer;display:flex;font-family:var(--emoji-font);font-size:var(--emoji-size);height:100%;justify-content:center;align-items:center;margin:0;overflow:hidden;padding:0;width:100%}.picmo__emojiButton:hover{background:var(--hover-background-color)}.picmo__emojiButton:focus{border-radius:0;background:var(--focus-indicator-background-color);outline:1px solid var(--focus-indicator-color)}.picmo__picker .picmo__emojiArea{height:var(--emoji-area-height);overflow-y:auto;position:relative}.picmo__picker .picmo__emojiCategory{position:relative}.picmo__picker .picmo__emojiCategory .picmo__categoryName{font-size:.9em;padding:.5rem;margin:0;background:var(--category-name-background-color);color:var(--category-name-text-color);top:0;z-index:1;display:grid;gap:4px;grid-template-columns:auto 1fr auto;align-items:center;line-height:1;box-sizing:border-box;height:var(--category-name-height);justify-content:flex-start;text-transform:uppercase}.picmo__picker .picmo__emojiCategory .picmo__categoryName button{background:transparent;border:none;display:flex;align-items:center;cursor:pointer;color:var(--category-name-button-color)}.picmo__picker .picmo__emojiCategory .picmo__categoryName button:hover{opacity:1}.picmo__picker .picmo__emojiCategory .picmo__noRecents{color:var(--secondary-text-color);grid-column:1 / span var(--emojis-per-row);font-size:.9em;text-align:center;display:flex;align-items:center;justify-content:center;min-height:calc(var(--emoji-size) * var(--emoji-size-multiplier))}.picmo__picker .picmo__emojiCategory .picmo__recentEmojis[data-empty=true]{display:none}:is(.picmo__picker .picmo__emojiCategory) .picmo__recentEmojis[data-empty=false]+div{display:none}.picmo__picker .picmo__emojiContainer{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center}.picmo__picker.picmo__picker{--border-radius: 5px;--emoji-area-height: calc( (var(--row-count) * var(--emoji-size) * var(--emoji-size-multiplier)) + var(--category-name-height) );--content-height: var(--emoji-area-height);--emojis-per-row: 8;--row-count: 6;--emoji-preview-margin: 4px;--emoji-preview-height: calc(var(--emoji-preview-size) + 1em + 1px);--emoji-preview-height-full: calc(var(--emoji-preview-height) + var(--emoji-preview-margin));--emoji-preview-size: 2.75em;--emoji-size: 2rem;--emoji-size-multiplier: 1.3;--content-margin: 8px;--category-tabs-height:calc(1.5em + 9px);--category-tabs-offset: 8px;--category-tab-size: 1.2rem;--category-name-height: 2rem;--category-name-padding-y: 6px;--search-height: 2em;--search-margin: .5em;--search-margin-bottom: 4px;--search-height-full: calc(var(--search-height) + var(--search-margin) + var(--search-margin-bottom));--overlay-background-color: rgba(0, 0, 0, .8);--emoji-font: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";--ui-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;--ui-font-size: 16px;--picker-width: calc(var(--emojis-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 2.75rem);--preview-background-color: var(--secondary-background-color);background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);font-size:var(--ui-font-size);overflow:hidden;position:relative;width:var(--picker-width);display:grid;gap:8px}.picmo__picker.picmo__picker>*{font-family:var(--ui-font)}.picmo__picker.picmo__skeleton{background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);width:var(--picker-width);color:var(--secondary-text-color)}.picmo__picker.picmo__skeleton *{box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__picker.picmo__skeleton .picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}.picmo__picker.picmo__skeleton .picmo__headerSkeleton{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:flex;flex-direction:column;overflow:hidden;gap:8px;border-bottom:1px solid var(--border-color);width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton{padding:0 8px;height:var(--search-height)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton .picmo__searchInput{width:100%;height:28px;border-radius:3px}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton{height:var(--category-tabs-height);display:flex;flex-direction:row;align-items:center;justify-self:center;width:calc(2rem * var(--category-count, 1))}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton .picmo__categoryTab{width:25px;height:25px;padding:2px;border-radius:5px;margin:.25em}.picmo__picker.picmo__skeleton .picmo__contentSkeleton{height:var(--content-height);padding-right:8px;opacity:.7}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__categoryName{width:50%;height:1rem;margin:.5rem;box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center;width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid .picmo__emoji{width:var(--emoji-size);height:var(--emoji-size);border-radius:50%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton{height:var(--emoji-preview-height);border-top:1px solid var(--border-color);display:grid;align-items:center;padding:.5em;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags"}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewEmoji{grid-area:emoji;border-radius:50%;width:var(--emoji-preview-size);height:var(--emoji-preview-size)}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewName{grid-area:name;height:.8em;width:80%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList .picmo__tag{border-radius:3px;padding:2px 8px;margin-right:.25em;height:1em;width:20%}.picmo__overlay{background:rgba(0,0,0,.75);height:100%;left:0;position:fixed;top:0;width:100%;z-index:1000}.picmo__content{position:relative;overflow:hidden;height:var(--content-height)}.picmo__content.picmo__fullHeight{height:calc(var(--content-height) + var(--category-tabs-height) + var(--category-tabs-offset));overflow-y:auto}.picmo__pluginContainer{margin:.5em;display:flex;flex-direction:row}.picmo__header{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:grid;gap:8px;border-bottom:1px solid var(--border-color)}@media (prefers-reduced-motion: reduce){.picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__placeholder:after{display:none}}.picmo__picker .picmo__preview{border-top:1px solid var(--border-color);display:grid;align-items:center;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags";height:var(--emoji-preview-height);box-sizing:border-box;padding:.5em;position:relative;background:var(--preview-background-color)}.picmo__picker .picmo__preview .picmo__previewEmoji{grid-area:emoji;font-size:var(--emoji-preview-size);font-family:var(--emoji-font);width:1.25em;display:flex;align-items:center;justify-content:center}.picmo__picker .picmo__preview .picmo__previewName{grid-area:name;color:var(--text-color);font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.picmo__picker .picmo__preview .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0;font-size:.75em;overflow:hidden}.picmo__picker .picmo__preview .picmo__tag{border-radius:3px;background:var(--tag-background-color);color:var(--text-color);padding:2px 8px;margin-right:.25em;white-space:nowrap}.picmo__picker .picmo__preview .picmo__tag:last-child{margin-right:0}.picmo__picker .picmo__searchContainer{display:flex;height:var(--search-height);box-sizing:border-box;padding:0 8px;position:relative}.picmo__picker .picmo__searchContainer .picmo__searchField{background:var(--search-background-color);border-radius:3px;border:none;box-sizing:border-box;color:var(--text-color);font-size:.9em;outline:none;padding:.5em 2.25em .5em .5em;width:100%}.picmo__picker .picmo__searchContainer .picmo__searchField:focus{background:var(--search-focus-background-color)}.picmo__picker .picmo__searchContainer .picmo__searchField::placeholder{color:var(--search-placeholder-color)}.picmo__picker .picmo__searchContainer .picmo__searchAccessory{color:var(--search-icon-color);height:100%;position:absolute;right:1em;top:0;width:1.25rem;display:flex;align-items:center}.picmo__picker .picmo__searchContainer .picmo__searchAccessory svg{fill:var(--search-icon-color)}.picmo__picker .picmo__searchContainer .picmo__clearButton{border:0;color:var(--search-icon-color);background:transparent;cursor:pointer}.picmo__picker .picmo__searchContainer .picmo__clearSearchButton{cursor:pointer;border:none;background:transparent;color:var(--search-icon-color);font-size:1em;width:100%;height:100%;display:flex;align-items:center;padding:0}.picmo__picker .picmo__searchContainer .picmo__notFound [data-icon]{fill:#f3e265}.picmo__picker .picmo__variantOverlay{background:var(--overlay-background-color);border-radius:5px;display:flex;flex-direction:column;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%;z-index:1}.picmo__picker .picmo__variantOverlay .picmo__variantPopup{background:var(--variant-popup-background-color);border-radius:5px;margin:.5em;padding:.5em;text-align:center;user-select:none;display:flex;align-items:center;justify-content:center}.picmo__customEmoji{width:1em;height:1em}@keyframes shine{to{transform:translate(100%)}}.picmo__picker .picmo__imagePlaceholder{width:2rem;height:2rem;border-radius:50%}.picmo__placeholder{background:#DDDBDD;position:relative}.picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}
`;let tj=0,tk;const tE=tC();function tS(e){return e.split("-")[0]}function tL(e){return e.split("-")[1]}function tA(e){return["top","bottom"].includes(tS(e))?"x":"y"}function tF(e){return"y"===e?"height":"width"}function tT(e,t,i){let o,{reference:r,floating:s}=e,n=r.x+r.width/2-s.width/2,a=r.y+r.height/2-s.height/2,c=tA(t),l=tF(c),h=r[l]/2-s[l]/2,u=tS(t),d="x"===c;switch(u){case"top":o={x:n,y:r.y-s.height};break;case"bottom":o={x:n,y:r.y+r.height};break;case"right":o={x:r.x+r.width,y:a};break;case"left":o={x:r.x-s.width,y:a};break;default:o={x:r.x,y:r.y}}switch(tL(t)){case"start":o[c]-=h*(i&&d?-1:1);break;case"end":o[c]+=h*(i&&d?-1:1)}return o}const tP=async(e,t,i)=>{let{placement:o="bottom",strategy:r="absolute",middleware:s=[],platform:n}=i,a=await (null==n.isRTL?void 0:n.isRTL(t)),c=await n.getElementRects({reference:e,floating:t,strategy:r}),{x:l,y:h}=tT(c,o,a),u=o,d={},p=0;for(let i=0;i<s.length;i++){let{name:m,fn:g}=s[i],{x:f,y:y,data:v,reset:w}=await g({x:l,y:h,initialPlacement:o,placement:u,strategy:r,middlewareData:d,rects:c,platform:n,elements:{reference:e,floating:t}});if(l=null!=f?f:l,h=null!=y?y:h,d={...d,[m]:{...d[m],...v}},w&&p<=50){p++,"object"==typeof w&&(w.placement&&(u=w.placement),w.rects&&(c=!0===w.rects?await n.getElementRects({reference:e,floating:t,strategy:r}):w.rects),{x:l,y:h}=tT(c,u,a)),i=-1;continue}}return{x:l,y:h,placement:u,strategy:r,middlewareData:d}};function tO(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function tz(e,t){var i;void 0===t&&(t={});let{x:o,y:r,platform:s,rects:n,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:d=!1,padding:p=0}=t,m="number"!=typeof p?{top:0,right:0,bottom:0,left:0,...p}:{top:p,right:p,bottom:p,left:p},g=a[d?"floating"===u?"reference":"floating":u],f=tO(await s.getClippingRect({element:null==(i=await (null==s.isElement?void 0:s.isElement(g)))||i?g:g.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:h,strategy:c})),y=tO(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===u?{...n.floating,x:o,y:r}:n.reference,offsetParent:await (null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),strategy:c}):n[u]);return{top:f.top-y.top+m.top,bottom:y.bottom-f.bottom+m.bottom,left:f.left-y.left+m.left,right:y.right-f.right+m.right}}const tI=Math.min,tM=Math.max,tR={left:"right",right:"left",bottom:"top",top:"bottom"};function t$(e){return e.replace(/left|right|bottom|top/g,e=>tR[e])}function tD(e,t,i){void 0===i&&(i=!1);let o=tL(e),r=tA(e),s=tF(r),n="x"===r?o===(i?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[s]>t.floating[s]&&(n=t$(n)),{main:n,cross:t$(n)}}const tN={start:"end",end:"start"};function tB(e){return e.replace(/start|end/g,e=>tN[e])}const tH=/* @__PURE__ */["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);async function tU(e,t){let{placement:i,platform:o,elements:r}=e,s=await (null==o.isRTL?void 0:o.isRTL(r.floating)),n=tS(i),a=tL(i),c="x"===tA(i),l=["left","top"].includes(n)?-1:1,h=s&&c?-1:1,u="function"==typeof t?t(e):t,{mainAxis:d,crossAxis:p,alignmentAxis:m}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return a&&"number"==typeof m&&(p="end"===a?-1*m:m),c?{x:p*h,y:d*l}:{x:d*l,y:p*h}}const tV=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){let{x:i,y:o}=t,r=await tU(t,e);return{x:i+r.x,y:o+r.y,data:r}}}},tq=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:i,y:o,placement:r}=t,{mainAxis:s=!0,crossAxis:n=!1,limiter:a={fn:e=>{let{x:t,y:i}=e;return{x:t,y:i}}},...c}=e,l={x:i,y:o},h=await tz(t,c),u=tA(tS(r)),d="x"===u?"y":"x",p=l[u],m=l[d];if(s){let e=p+h["y"===u?"top":"left"],t=p-h["y"===u?"bottom":"right"];p=tM(e,tI(p,t))}if(n){let e=m+h["y"===d?"top":"left"],t=m-h["y"===d?"bottom":"right"];m=tM(e,tI(m,t))}let g=a.fn({...t,[u]:p,[d]:m});return{...g,data:{x:g.x-i,y:g.y-o}}}}};function tW(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function tK(e){if(null==e)return window;if(!tW(e)){let t=e.ownerDocument;return t&&t.defaultView||window}return e}function tG(e){return tK(e).getComputedStyle(e)}function tJ(e){return tW(e)?"":e?(e.nodeName||"").toLowerCase():""}function tZ(){let e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function tY(e){return e instanceof tK(e).HTMLElement}function tX(e){return e instanceof tK(e).Element}function tQ(e){if(typeof ShadowRoot>"u")return!1;let t=tK(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function t1(e){let{overflow:t,overflowX:i,overflowY:o}=tG(e);return/auto|scroll|overlay|hidden/.test(t+o+i)}function t0(e){let t=/firefox/i.test(tZ()),i=tG(e);return"none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||["transform","perspective"].includes(i.willChange)||t&&"filter"===i.willChange||t&&!!i.filter&&"none"!==i.filter}function t2(){return!/^((?!chrome|android).)*safari/i.test(tZ())}const t3=Math.min,t5=Math.max,t4=Math.round;function t6(e,t,i){var o,r,s,n;void 0===t&&(t=!1),void 0===i&&(i=!1);let a=e.getBoundingClientRect(),c=1,l=1;t&&tY(e)&&(c=e.offsetWidth>0&&t4(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&t4(a.height)/e.offsetHeight||1);let h=tX(e)?tK(e):window,u=!t2()&&i,d=(a.left+(u&&null!=(o=null==(r=h.visualViewport)?void 0:r.offsetLeft)?o:0))/c,p=(a.top+(u&&null!=(s=null==(n=h.visualViewport)?void 0:n.offsetTop)?s:0))/l,m=a.width/c,g=a.height/l;return{width:m,height:g,top:p,right:d+m,bottom:p+g,left:d,x:d,y:p}}function t9(e){return((e instanceof tK(e).Node?e.ownerDocument:e.document)||window.document).documentElement}function t8(e){return tX(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function t7(e){return t6(t9(e)).left+t8(e).scrollLeft}function ie(e){return"html"===tJ(e)?e:e.assignedSlot||e.parentNode||(tQ(e)?e.host:null)||t9(e)}function it(e){return tY(e)&&"fixed"!==tG(e).position?function(e){let{offsetParent:t}=e,i=e,o=!1;for(;i&&i!==t;){let{assignedSlot:e}=i;if(e){let r=e.offsetParent;if("contents"===tG(e).display){let t=e.hasAttribute("style"),o=e.style.display;e.style.display=tG(i).display,r=e.offsetParent,e.style.display=o,t||e.removeAttribute("style")}i=e,t!==r&&(t=r,o=!0)}else if(tQ(i)&&i.host&&o)break;i=tQ(i)&&i.host||i.parentNode}return t}(e):null}function ii(e){let t=tK(e),i=it(e);for(;i&&["table","td","th"].includes(tJ(i))&&"static"===tG(i).position;)i=it(i);return i&&("html"===tJ(i)||"body"===tJ(i)&&"static"===tG(i).position&&!t0(i))?t:i||function(e){let t=ie(e);for(tQ(t)&&(t=t.host);tY(t)&&!["html","body"].includes(tJ(t));){if(t0(t))return t;{let e=t.parentNode;t=tQ(e)?e.host:e}}return null}(e)||t}function io(e){if(tY(e))return{width:e.offsetWidth,height:e.offsetHeight};let t=t6(e);return{width:t.width,height:t.height}}function ir(e,t){var i;void 0===t&&(t=[]);let o=function e(t){let i=ie(t);return["html","body","#document"].includes(tJ(i))?t.ownerDocument.body:tY(i)&&t1(i)?i:e(i)}(e),r=o===(null==(i=e.ownerDocument)?void 0:i.body),s=tK(o),n=r?[s].concat(s.visualViewport||[],t1(o)?o:[]):o,a=t.concat(n);return r?a:a.concat(ir(n))}function is(e,t,i){return"viewport"===t?tO(function(e,t){let i=tK(e),o=t9(e),r=i.visualViewport,s=o.clientWidth,n=o.clientHeight,a=0,c=0;if(r){s=r.width,n=r.height;let e=t2();(e||!e&&"fixed"===t)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:n,x:a,y:c}}(e,i)):tX(t)?function(e,t){let i=t6(e,!1,"fixed"===t),o=i.top+e.clientTop,r=i.left+e.clientLeft;return{top:o,left:r,x:r,y:o,right:r+e.clientWidth,bottom:o+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,i):tO(function(e){var t;let i=t9(e),o=t8(e),r=null==(t=e.ownerDocument)?void 0:t.body,s=t5(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),n=t5(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-o.scrollLeft+t7(e),c=-o.scrollTop;return"rtl"===tG(r||i).direction&&(a+=t5(i.clientWidth,r?r.clientWidth:0)-s),{width:s,height:n,x:a,y:c}}(t9(e)))}const ia={getClippingRect:function(e){let{element:t,boundary:i,rootBoundary:o,strategy:r}=e,s=[..."clippingAncestors"===i?function(e){let t=ir(e),i=["absolute","fixed"].includes(tG(e).position)&&tY(e)?ii(e):e;return tX(i)?t.filter(e=>tX(e)&&function(e,t){let i=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(i&&tQ(i)){let i=t;do{if(i&&e===i)return!0;i=i.parentNode||i.host}while(i)}return!1}(e,i)&&"body"!==tJ(e)):[]}(t):[].concat(i),o],n=s[0],a=s.reduce((e,i)=>{let o=is(t,i,r);return e.top=t5(o.top,e.top),e.right=t3(o.right,e.right),e.bottom=t3(o.bottom,e.bottom),e.left=t5(o.left,e.left),e},is(t,n,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:i,strategy:o}=e,r=tY(i),s=t9(i);if(i===s)return t;let n={scrollLeft:0,scrollTop:0},a={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==tJ(i)||t1(s))&&(n=t8(i)),tY(i))){let e=t6(i,!0);a.x=e.x+i.clientLeft,a.y=e.y+i.clientTop}return{...t,x:t.x-n.scrollLeft+a.x,y:t.y-n.scrollTop+a.y}},isElement:tX,getDimensions:io,getOffsetParent:ii,getDocumentElement:t9,getElementRects:e=>{let{reference:t,floating:i,strategy:o}=e;return{reference:function(e,t,i){let o=tY(t),r=t9(t),s=t6(e,o&&function(e){let t=t6(e);return t4(t.width)!==e.offsetWidth||t4(t.height)!==e.offsetHeight}(t),"fixed"===i),n={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(o||!o&&"fixed"!==i){if(("body"!==tJ(t)||t1(r))&&(n=t8(t)),tY(t)){let e=t6(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else r&&(a.x=t7(r))}return{x:s.left+n.scrollLeft-a.x,y:s.top+n.scrollTop-a.y,width:s.width,height:s.height}}(t,ii(i),o),floating:{...io(i),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===tG(e).direction},ic=(e,t,i)=>tP(e,t,{platform:ia,...i});async function il(e,t,i,o){if(!o)throw Error("Must provide a positioning option");return await ("string"==typeof o?ih(e,t,i,o):(t.style.position="fixed",Object.entries(o).forEach(([e,i])=>{t.style[e]=i}),()=>{}))}async function ih(e,t,i,o){var r,s;let n;if(!i)throw Error("Reference element is required for relative positioning");return n="auto"===o?{middleware:[(void 0===r&&(r={}),{name:"autoPlacement",options:r,async fn(e){var t,i,o,s,n;let{x:a,y:c,rects:l,middlewareData:h,placement:u,platform:d,elements:p}=e,{alignment:m=null,allowedPlacements:g=tH,autoAlignment:f=!0,...y}=r,v=(m?[...g.filter(e=>tL(e)===m),...g.filter(e=>tL(e)!==m)]:g.filter(e=>tS(e)===e)).filter(e=>!m||tL(e)===m||!!f&&tB(e)!==e),w=await tz(e,y),b=null!=(t=null==(i=h.autoPlacement)?void 0:i.index)?t:0,_=v[b];if(null==_)return{};let{main:C,cross:x}=tD(_,l,await (null==d.isRTL?void 0:d.isRTL(p.floating)));if(u!==_)return{x:a,y:c,reset:{placement:v[0]}};let j=[w[tS(_)],w[C],w[x]],k=[...null!=(o=null==(s=h.autoPlacement)?void 0:s.overflows)?o:[],{placement:_,overflows:j}],E=v[b+1];if(E)return{data:{index:b+1,overflows:k},reset:{placement:E}};let S=k.slice().sort((e,t)=>e.overflows[0]-t.overflows[0]),L=null==(n=S.find(e=>{let{overflows:t}=e;return t.every(e=>e<=0)}))?void 0:n.placement,A=null!=L?L:S[0].placement;return A!==u?{data:{index:b+1,overflows:k},reset:{placement:A}}:{}}}),tq(),tV({mainAxis:5,crossAxis:12})]}:{placement:o,middleware:[(void 0===s&&(s={}),{name:"flip",options:s,async fn(e){var t,i,o,r;let{placement:n,middlewareData:a,rects:c,initialPlacement:l,platform:h,elements:u}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",flipAlignment:f=!0,...y}=s,v=tS(n),w=m||(v!==l&&f?function(e){let t=t$(e);return[tB(e),t,tB(t)]}(l):[t$(l)]),b=[l,...w],_=await tz(e,y),C=[],x=(null==(t=a.flip)?void 0:t.overflows)||[];if(d&&C.push(_[v]),p){let{main:e,cross:t}=tD(n,c,await (null==h.isRTL?void 0:h.isRTL(u.floating)));C.push(_[e],_[t])}if(x=[...x,{placement:n,overflows:C}],!C.every(e=>e<=0)){let e=(null!=(i=null==(o=a.flip)?void 0:o.index)?i:0)+1,t=b[e];if(t)return{data:{index:e,overflows:x},reset:{placement:t}};let s="bottom";switch(g){case"bestFit":{let e=null==(r=x.map(e=>[e,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:r[0].placement;e&&(s=e);break}case"initialPlacement":s=l}if(n!==s)return{reset:{placement:s}}}return{}}}),tq(),tV(5)]},function(e,t,i,o){void 0===o&&(o={});let{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:n=!0,animationFrame:a=!1}=o,c=r&&!a,l=s&&!a,h=c||l?[...tX(e)?ir(e):[],...ir(t)]:[];h.forEach(e=>{c&&e.addEventListener("scroll",i,{passive:!0}),l&&e.addEventListener("resize",i)});let u=null;if(n){let o=!0;u=new ResizeObserver(()=>{o||i(),o=!1}),tX(e)&&!a&&u.observe(e),u.observe(t)}let d,p=a?t6(e):null;return a&&function t(){let o=t6(e);p&&(o.x!==p.x||o.y!==p.y||o.width!==p.width||o.height!==p.height)&&i(),p=o,d=requestAnimationFrame(t)}(),i(),()=>{var e;h.forEach(e=>{c&&e.removeEventListener("scroll",i),l&&e.removeEventListener("resize",i)}),null==(e=u)||e.disconnect(),u=null,a&&cancelAnimationFrame(d)}}(i,t,async()=>{if((!i.isConnected||!i.offsetParent)&&function(e){switch(e.options.onPositionLost){case"close":return e.close(),!0;case"destroy":return e.destroy(),!0;case"hold":return!0}}(e))return;let{x:o,y:r}=await ic(i,t,n);Object.assign(t.style,{position:"absolute",left:`${o}px`,top:`${r}px`})})}const iu={hideOnClickOutside:!0,hideOnEmojiSelect:!0,hideOnEscape:!0,position:"auto",showCloseButton:!0,onPositionLost:"none"},id=I("popupContainer","closeButton");class ip{constructor(e,t){this.isOpen=!1,this.externalEvents=new eA,this.options={...function(e={}){return{...iu,rootElement:document.body,...e}}(t),...eL(e)},this.popupEl=document.createElement("div"),this.popupEl.classList.add(id.popupContainer),this.popupEl.classList.add(this.options.theme),t.className&&this.popupEl.classList.add(t.className),this.options.showCloseButton&&(this.closeButton=document.createElement("button"),this.closeButton.type="button",this.closeButton.classList.add(id.closeButton),this.closeButton.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>',this.closeButton.addEventListener("click",()=>{this.close()}),this.popupEl.appendChild(this.closeButton));let i=document.createElement("div");this.popupEl.appendChild(i),this.picker=function(e){tE(tx);let t=eL(e),i=((null==t?void 0:t.custom)||[]).map(e=>({...e,custom:!0,tags:["custom",...e.tags||[]]})),o=new eT;tk||(tk=ee(t.locale,t.dataStore,t.messages,t.emojiData));let r=new t_(t.i18n);tk.then(e=>{o.emit("data:ready",e)}).catch(e=>{o.emit("error",e)});let s=new tb({events:o,i18n:r,customEmojis:i,renderer:t.renderer,options:t,emojiData:tk,pickerId:`picmo-${Date.now()}-${tj++}`}).create(tw);return s.renderSync(),s}({...this.options,rootElement:i}),this.focusTrap=new et,this.picker.addEventListener("data:ready",()=>{this.focusTrap.activate(this.picker.el),this.picker.setInitialFocus()}),this.options.hideOnEmojiSelect&&this.picker.addEventListener("emoji:select",()=>{var e;this.close(),null==(e=this.triggerElement)||e.focus()}),this.options.hideOnClickOutside&&(this.onDocumentClick=this.onDocumentClick.bind(this),document.addEventListener("click",this.onDocumentClick)),this.options.hideOnEscape&&(this.handleKeydown=this.handleKeydown.bind(this),this.popupEl.addEventListener("keydown",this.handleKeydown)),this.referenceElement=this.options.referenceElement,this.triggerElement=this.options.triggerElement}addEventListener(e,t){this.externalEvents.on(e,t),this.picker.addEventListener(e,t)}removeEventListener(e,t){this.externalEvents.off(e,t),this.picker.removeEventListener(e,t)}handleKeydown(e){var t;"Escape"===e.key&&(this.close(),null==(t=this.triggerElement)||t.focus())}async destroy(){this.isOpen&&await this.close(),document.removeEventListener("click",this.onDocumentClick),this.picker.destroy(),this.externalEvents.removeAll()}toggle(e){return this.isOpen?this.close():this.open(e)}async open({triggerElement:e,referenceElement:t}={}){this.isOpen||(e&&(this.triggerElement=e),t&&(this.referenceElement=t),await this.initiateOpenStateChange(!0),this.popupEl.style.opacity="0",this.options.rootElement.appendChild(this.popupEl),await this.setPosition(),this.picker.reset(!1),await this.animatePopup(!0),await this.animateCloseButton(!0),this.picker.setInitialFocus(),this.externalEvents.emit("picker:open"))}async close(){var e;this.isOpen&&(await this.initiateOpenStateChange(!1),await this.animateCloseButton(!1),await this.animatePopup(!1),this.popupEl.remove(),this.picker.reset(),null==(e=this.positionCleanup)||e.call(this),this.focusTrap.deactivate(),this.externalEvents.emit("picker:close"))}getRunningAnimations(){return this.picker.el.getAnimations().filter(e=>"running"===e.playState)}async setPosition(){var e;null==(e=this.positionCleanup)||e.call(this),this.positionCleanup=await il(this,this.popupEl,this.referenceElement,this.options.position)}awaitPendingAnimations(){return Promise.all(this.getRunningAnimations().map(e=>e.finished))}onDocumentClick(e){var t;let i=e.target,o=null==(t=this.triggerElement)?void 0:t.contains(i);!this.isOpen||this.picker.isPickerClick(e)||o||this.close()}animatePopup(e){return P(this.popupEl,{opacity:[0,1],transform:["scale(0.9)","scale(1)"]},{duration:150,id:e?"show-picker":"hide-picker",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}animateCloseButton(e){if(this.closeButton)return P(this.closeButton,{opacity:[0,1]},{duration:25,id:e?"show-close":"hide-close",easing:"ease-in-out",direction:e?"normal":"reverse",fill:"both"},this.options)}async initiateOpenStateChange(e){this.isOpen=e,await this.awaitPendingAnimations()}}const im=`.picmo__popupContainer{display:flex;flex-direction:column;position:absolute}.picmo__popupContainer .picmo__closeButton{position:absolute;opacity:0;background:transparent;border:none;z-index:1;right:0;top:0;cursor:pointer;padding:4px;align-self:flex-end;transform:translate(50%,-50%);background:#999999;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.picmo__popupContainer .picmo__closeButton:hover{background:var(--accent-color)}.picmo__popupContainer .picmo__closeButton svg{fill:#fff;width:1.25rem;height:1.25rem}
`,ig=tC();/**
 * main entry
 */async function iy(){let e=document.createElement("div");e.classList.add("emoji-picker-trigger"),document.getElementById("app").appendChild(e);let t=[{emoji:"doge",label:"Doge",url:"https://i.imgur.com/HeGEEbu.jpeg",tags:["dog","doge","meme"],data:{id:1}},{emoji:"logseq",label:"Logseq",url:"https://raw.githubusercontent.com/logseq/logseq/master/resources/icons/logseq.png",tags:["logo","logseq"],data:{id:2}},{emoji:"nyancat",label:"Nyan cat",url:"https://i.imgur.com/MjeqeUP.gif",tags:["cat","rainbow","meme"],data:{id:3}},{emoji:"partyparrot",label:"party parrot",url:"https://i.imgur.com/IJsMwM4.gif",tags:["party","parrot","meme"],data:{id:4}}],i=!1,o=null,r=async()=>{var r;if(o)return o;let s=await logseq.App.getStateFromStore("ui/theme");return void 0===logseq.settings.customEmojiSettings&&logseq.updateSettings({customEmojiSettings:t}),r={theme:({dark:eo,light:ei})[s],custom:logseq.settings.customEmojiSettings,autoFocusSearch:!0,animate:!1,initialCategory:"recents"},ig(im),(o=new ip({autoFocus:"auto",...r},{triggerElement:e,referenceElement:e,position:"bottom-start",showCloseButton:!1})).addEventListener("emoji:select",async e=>{if(i=!0,logseq.hideMainUI(),e.url){let t=document.createElement("img");t.src=e.url,t.alt=e.emoji,t.setAttribute("style","max-height:1em;width:auto;height:auto;display:inline-block");let i=t.outerHTML.replace(">"," />");await logseq.Editor.insertAtEditingCursor(i)}else await logseq.Editor.insertAtEditingCursor(e.emoji)}),//ESC
document.addEventListener("keydown",function(e){"Escape"===e.key&&logseq.hideMainUI({restoreEditingCursor:!0}),e.stopPropagation()},!1),document.addEventListener("click",e=>{e.target.closest('div[class*="picmo__popupContainer"]')||i||logseq.hideMainUI({restoreEditingCursor:!0}),i=!1}),o},s=[{key:"customEmojiSettings",type:"object",default:t,title:"Custom Emoji Settings",description:"Add custom emoji in json config (reload plugin to take effect)."}];logseq.useSettingsSchema(s),logseq.App.onThemeModeChanged(async()=>{let e=await logseq.App.getStateFromStore("ui/theme"),t={dark:eo,light:ei}[e];o.picker.updateOptions({theme:t})}),logseq.Editor.registerSlashCommand("\uD83D\uDE00 Emoji picker",async()=>{let{left:t,top:i,rect:s}=await logseq.Editor.getEditingCursorPosition();Object.assign(e.style,{top:i+s.top+"px",left:t+s.left+"px"}),o=await r(),logseq.showMainUI(),setTimeout(()=>{o.open()},100)})}// bootstrap
logseq.ready(iy).catch(console.error);